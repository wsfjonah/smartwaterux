{"version":3,"sources":["app.js","config.js","services.js","directives.js","factory.js","filter.js","authCtrl.js"],"names":["env","window","Object","assign","__env","app","angular","module","constant","controller","$scope","$translate","authService","$location","$rootScope","$window","vm","this","flag_path","folder","default_userInfo","username","token","role","projects","current_project","name","timezone","lang","apps","flag_img","en","cn","lang_trans","currLang","$on","xpro","initPageLoadedLibrary","resizeHeader","userInfo","getAuthentication","$watch","layoutViewClass","isDefined","page_key","isCurrentPath","path","changeLanguage","key","use","langReloadPath","indexOf","$$path","location","reload","isAuthenticated","isLoggedIn","switchProject","projectId","then","response","data","updateProject","opts","extend","console","log","getProjectUpdate","logout","event","language","run","currRoute","page_params","restrictions","ensureAuthenticated","config","$httpProvider","$translateProvider","$qProvider","errorOnUnhandledRejections","interceptors","push","defaults","headers","get","useStaticFilesLoader","prefix","localeFolderUrl","suffix","preferredLanguage","useLocalStorage","useSanitizeValueStrategy","factory","$q","$injector","localStorageService","authInterceptorServiceFactory","request","authData","ignore_url","ignoreInterceptorRequest","url","params","responseError","rejection","status","xhrStatus","reject","$routeProvider","when","templateUrl","loginRedirect","resolve","loadMyCtrl","$ocLazyLoad","load","serie","files","controllerAs","otherwise","redirectTo","$http","$httpParamSerializerJQLike","_authentication_info","isAuth","login","user","method","userLoginUrl","Content-Type","projectid","switchProjectUrl","res","opts_res","set","setAuthentication","user_info","isToken","auth_res","apiService","apiBaseURL","baseUrl","Pragma","undefined","Cache-Control","X-Requested-With","If-Modified-Since","siteApi","string","configArr","timeSeriesAnyApi","id","timeSeriesAnyUrl","timeSeriesHighRateApi","from","to","timeSeriesRangeApi","timeSeriesRangeUrl","datapoints","resolution","batchTimeSeriesApi","defaultParams","userParams","$","batchTimeSeriesUrl","eventAnyApi","eventAnyUrl","eventAnyApiPaging","page","eventDurationApi","eventDurationUrl","duration","eventMonitorApi","time","eventRangeApi","eventRangeUrl","eventSingleRangeApi","datapointId","eventSingleRangeUrl","eventDetailsApi","eventId","eventDetailsUrl","boundaryApi","heatMapApi","sensorApi","query","pipeApi","networkSensorApi","networkSensorUrl","networkPipeApi","networkPipeUrl","networkPipeSummaryApi","networkPipeSummaryUrl","networkAnalysisPipeApi","networkAnalysisPipeUrl","networkAnalysisCoverageApi","networkAnalysisSensorCoverageUrl","networkPumpApi","networkPumpUrl","networkHydrantApi","mapcenter","networkHydrantUrl","networkPipeDetailsApi","networkPipeDetailsUrl","service","getColors","markerConfig","icon","width","height","title","content","$inject","canvasAction","elem","chartElem","find","addClass","min","max","hide","show","togglePan","btnElem","isTrigger","panElem","toolbar","value","panActive","hasClass","click","removeClass","attr","destroyTooltip","tooltips","elemReady","$parse","restrict","link","attrs","ready","$apply","func","projectDropdown","scope","options","template","switch","_id","pageMain","xproMap","modalService","mapApi","replace","info","onMapLoaded","topHt","outerHeight","css","resize","initialize","navCtrl","scaleCtrl","overviewCtrl","enableScrollWheelZoom","enableAutoResize","zoom","mapType","fullScreen","map","createMapInstance","previousMarkers","redrawMarkers","boundaryArea","xproHeatmap","drawPipeArea","newValue","length","addEventListener","drawHeatMap","xproNetworkMap","dialogService","notify","menu","menus","langMenu","search","instant","pipes","sensors","pumps","hydrant","pipeDetails","coverage","cart","remove","toggleNetworkMapButtons","prototype","BMap","Control","div","document","createElement","className","setAttribute","hasOwnProperty","divSearch","searchToggle","searchIcon","searchDropdown","searchClear","clearIcon","searchInput","appendChild","onclick","group","parents","isActive","isKeyword","input","prevVal","removeActiveClass","val","focus","e","preventDefault","searchSensor","onkeyup","trim","keyCode","onblur","setTimeout","divCartGroup","cartMenuButton","innerHTML","badgeDiv","target","pr","cartDiv","cartHeader","cartHeaderTitle","cartBody","divGroup","divButtonTrigger","divButtonTriggerIcon","divSubGroup","forEach","divMenuGroup","menuButton","divDropdown","divAll","stopPropagation","thisElem","type","toggleClass","siblings","toggleUpdateOverlay","results","row","valName","divSub","items","parent","itemNonSelect","filter","itemAll","parseInt","coveragePipes","removeOverlay","removeCoverage","getCenter","getZoom","setZoom","lat","lng","p","longitude","latitude","alert","ok","centerPoints","hydrantInstance","markerItem","createMarker","Point","addOverlay","setLabel","moveTargetToCenter","drawHydrant","getHydrantData","junctions","weight","optional","diameter","element","pipeDetailsInstance","pipeArr","loc","pt","pipeOverlay","Polyline","strokeColor","strokeWeight","strokeOpacity","drawPipeDetails","getPipeDetailsData","divClear","clearHydrant","clearPipeDetails","getContainer","myCtrl","addControl","createNetworkMenu","pumpInstance","setTop","drawPumps","plotMarkers","container","lenMarker","html","i","len","datapoint","pressure","getElementById","off","on","removePlotMarker","open","modalUrl","modalCtrl","createPlotMarkerCart","deferred","defer","initMap","script","src","body","loadScript","promise","heatmapApi","fullscreenControl","defaultAnchor","BMAP_ANCHOR_TOP_RIGHT","defaultOffset","Size","toggleHeatMapButtons","index","plotMarkerInstance","setAnimation","splice","Map","centerAndZoom","center","NavigationControl","setCurrentCity","city","disableScrollWheelZoom","zoomBtn","zoomIcon","myZoomCtrl","createFullScreen","labelHeatMap","chkHeatMap","append","labelPipe","chkPipe","labelMarker","chkMarker","onchange","isOn","checked","heatmapOverlay","allOverlay","getOverlays","toString","createHeatMapButtons","marker","point","newMarker","Marker","Icon","anchor","arr","list","multi","opt","keyword","userValue","fields","matchArr","cloneInstance","markerInstance","centerpoint","onSearch","markers","inArray","toLowerCase","position","geo_latlng","split","num","clickOutsideToClose","callback","points","setViewport","tag","subzone","updateSensorOverlay","pipeInstance","updatePipeOverlay","updateStatusOverlay","updatePumpOverlay","color","msg","infoWindowItem","InfoWindow","enableMessage","openInfoWindow","Math","ceil","boundary","polygon","Polygon","fillColor","moveMapToCenter","getContext","isSupportCanvas","removeEventListener","BMapLib","HeatmapOverlay","radius","setDataSet","heatMap","item","listener","infoButton","previousMarker","coverageButton","cartButton","elData","elInfo","elCoverage","elCart","modalUrlInfo","modalCtrlInfo","pline","closeInfoWindow","drawCoveragePipe","isUnique","oldArr","newArr","validateUniquMarker","totalSelected","BMAP_ANIMATION_BOUNCE","imgtodrag","imgclone","clone","offset","top","left","opacity","z-index","appendTo","animate","clearTimeout","cart_timer","detach","addToCartAnimation","Ac","directive","default_opts","oldValue","$mdDialog","ev","opt_config","querySelector","textContent","ariaLabel","targetEvent","$mdToast","toastService","simple","hideDelay","$uibModal","modalInstance","ctrl","size","result","selectedItem","selected","object","equals","timestamp","moment","fromNow","obj","limit","keys","ret","count","arrayIndex","$sce","version","assetVersion","trustAsResourceUrl","authLoginController","onLogin","catch"],"mappings":"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","file":"angular-app.min.js","sourcesContent":["/* global angular, xpro, __env */\n'use strict';\nvar env = {};\n// Import variables if present (from env.js)\nif(window){\n\tObject.assign(env, window.__env);\n}\nvar app = angular\n\t.module('xProject', [\n\t\t'ngMaterial',\n\t\t'pascalprecht.translate',\n\t\t'ngRoute',\n\t\t'ngCookies',\n\t\t'LocalStorageModule',\n\t\t'xProject.config',\n\t\t'xProject.directive',\n\t\t'xProject.factory',\n\t\t'xProject.filter',\n\t\t'xProject.services',\n\t\t'xProject.auth'\n\t]);\n\napp.constant('__env', env);\napp.controller('layoutCtrl', function layoutCtrl ($scope, $translate, authService, $location, $rootScope, $window) {\n\tvar vm = this;\n\tvar flag_path = __env.folder+\"/assets/img/flags/\";\n\tvar default_userInfo = {\n\t\tusername: \"\",\n\t\ttoken: \"\",\n\t\trole: \"\",\n\t\tprojects:[],\n\t\tcurrent_project: {\n\t\t\tname: \"\"\n\t\t},\n\t\ttimezone: \"\",\n\t\tlang: \"\",\n\t\tapps: {}\n\t};\n\tvm.flag_img = {\n\t\t\"en\" : flag_path+\"US.png\",\n\t\t\"cn\" : flag_path+\"CN.png\"\n\t};\n\n\tvm.lang_trans = {\n\t\t\"en\" : \"us\",\n\t\t\"cn\" : \"cn\"\n\t};\n\n\tvm.currLang = vm.flag_img[$rootScope.lang];\n\n\t$scope.$on('$includeContentLoaded', function (/*event, target*/) {\n\t\txpro.initPageLoadedLibrary();\n\t});\n\n\t$scope.$on('$viewContentLoaded', function(){\n\t\txpro.resizeHeader();\n\t});\n\n\tvm.userInfo = authService.getAuthentication();\n\t/* watching authService.getAuthentication() to get the user info\n\t*/\n\t$scope.$watch(function() { return authService.getAuthentication(); }, function(/*newVal*/) {\n\t\tvm.userInfo = authService.getAuthentication();\n\t}, true);\n\n\tvm.layoutViewClass = function() {\n\t\treturn (angular.isDefined($rootScope.page_key) && $rootScope.page_key===\"login\") ? \"layout-login\" : \"\";\n\t};\n\n\tvm.isCurrentPath = function (path) {\n\t\treturn $location.path() == path;\n\t};\n\n\tvm.changeLanguage = function (key) {\n\t\t$translate.use(key);\n\t\tif(__env.langReloadPath.indexOf($location.$$path)>=0){\n\t\t\t$window.location.reload();\n\t\t}\n\t};\n\tvm.isAuthenticated = function() {\n\t\treturn authService.isLoggedIn();\n    \t};\n    \tvm.switchProject = function(projectId){\n    \t\tauthService.switchProject(projectId).then(function(response){\n    \t\t\tif(angular.isDefined(response.data.token)){\n    \t\t\t\tauthService.updateProject(response.data);\n    \t\t\t\tgetProjectUpdate();\n    \t\t\t\t//vm.projectName = projectId;\n    \t\t\t}\n    \t\t});\n    \t};\n    \tvm.logout = function () {\n    \t\tvm.userInfo = angular.extend({}, vm.userInfo, default_userInfo);\n\t\tauthService.logout();\n\t\t$location.path('/login');\n\t};\n\t$rootScope.$on('$translateChangeSuccess', function(event, data) {\n\t\t$rootScope.lang = data.language;\n\t\tvm.currLang = vm.lang_trans[data.language];//vm.flag_img[data.language];\n\t});\n\n\tfunction getProjectUpdate(){\n\t\tvar opts = authService.getAuthentication();\n\t\tvm.userInfo = angular.extend({}, default_userInfo, opts);\n\t\tconsole.log(vm.userInfo);\n\t}\n});\n\napp.run(['$rootScope', '$location', 'authService', function ($rootScope, $location, authService) {\n\t$rootScope.lang = 'en';\n\t$rootScope.page_key = '';\n\t$rootScope.$on('$routeChangeStart', function (event, currRoute/*, prevRoute*/) {\n\t\tif(angular.isDefined(currRoute.page_params) && angular.isDefined(currRoute.page_params.key)){\n\t\t\t$rootScope.page_key = currRoute.page_params.key;\n\t\t}\n\t\tif(angular.isDefined(currRoute.restrictions) && currRoute.restrictions.ensureAuthenticated){\n\t\t\tvar user_info = authService.isLoggedIn();\n\t\t\tif(!user_info){\n\t\t\t\tauthService.logout();\n\t\t\t\t$location.path('/login');\n\t\t\t}\n\t\t}\n\t});\n}]);\n\napp.config(function ($httpProvider, $translateProvider, $qProvider) {\n\t$qProvider.errorOnUnhandledRejections(false);\n\t$httpProvider.interceptors.push('authInterceptorService');\n\n\t//no cache\n\tif(!angular.isDefined($httpProvider.defaults.headers.get)){\n\t\t$httpProvider.defaults.headers.get = {};\n\t}\n\t$httpProvider.defaults.headers.get['Cache-Control'] = 'no-cache';\n\t$httpProvider.defaults.headers.get['Pragma'] = 'no-cache';\n\n\t//translation\n\t$translateProvider\n\t\t.useStaticFilesLoader({\n\t\t\tprefix: __env.localeFolderUrl,\n\t\t\tsuffix: '.json'\n\t\t})\n\t\t.preferredLanguage('en')\n\t\t.useLocalStorage()\n\t\t.useSanitizeValueStrategy('escapeParameters'); //without this. warning msg from angularjs about security issue\n\n});\n\napp.factory('authInterceptorService', ['$q', '$injector','$location', 'localStorageService', function ($q, $injector,$location, localStorageService) {\n\tvar authInterceptorServiceFactory = {};\n\tvar _request = function (config) {\n\t\tconfig.headers = config.headers || {};\n\t\tvar authData = localStorageService.get('authorizationData');\n\t\tvar ignore_url = __env.ignoreInterceptorRequest;\n\t\tif(authData!==null){\n\t\t\tif(angular.isDefined(authData.token) && ignore_url.indexOf(config.url)<0) {\n\t\t\t\tconfig.params = {'token': authData.token};\n\t\t\t}\n\t\t}\n\t\treturn config;\n\t};\n\tvar _responseError = function (rejection) {\n\t\tconsole.log('##rejection');\n\t\tif (rejection.status === 401 || rejection.status === -1 && rejection.xhrStatus!==\"abort\") {//xhrStatus trick\n\t\t\tvar authService = $injector.get('authService');\n\t\t\tauthService.logout();\n\t\t\t$location.path('/login');\n\t\t}\n\t\treturn $q.reject(rejection);\n\t};\n\tauthInterceptorServiceFactory.request = _request;\n\tauthInterceptorServiceFactory.responseError = _responseError;\n\treturn authInterceptorServiceFactory;\n}]);","/* global angular */\n(function() {\n\t'use strict';\n\tangular\n\t\t.module('xProject.config', ['oc.lazyLoad'])\n\t\t.config(appConfig);\n\n\tfunction appConfig($routeProvider) {\n\t\t$routeProvider\n\t\t.when('/main', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/main/main.html',\n\t\t\tcontroller: 'mainController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"dashboard\"\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load({\n\t\t\t\t\t\tserie: true,\n\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t'assets/js/plugins/sparkline/jquery.sparkline.min.js',\n\t\t\t\t\t\t\t'assets/js/plugins/chartist-js/dist/chartist.min.css',\n\t\t\t\t\t\t\t'assets/js/plugins/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.css',\n\t\t\t\t\t\t\t'assets/js/plugins/chartist-js/dist/chartist.min.js',\n\t\t\t\t\t\t\t'assets/js/plugins/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js',\n\t\t\t\t\t\t\t'assets/js/xpro_dashboard.js',\n\t\t\t\t\t\t\t'app/modules/main/mainCtrl.js'\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}]\n\t\t\t}\n\t\t})\n\t\t.when('/location', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/remote/location.html',\n\t\t\tcontroller: 'locationController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"location\"\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load({\n\t\t\t\t\t\tserie: true,\n\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t'app/vendors/angular-daterangepicker.min.js',\n\t\t\t\t\t\t\t'app/modules/remote/locationCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalEventDetailsCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalTimeSeriesCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalHighRateCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalDetailsCtrl.js'\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}]\n\t\t\t},\n\t\t})\n\t\t.when('/site', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/remote/site.html',\n\t\t\tcontroller: 'siteTableController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load({\n\t\t\t\t\t\tserie: true,\n\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t'assets/css/bootstrap-table.css',\n\t\t\t\t\t\t\t'assets/js/bootstrap-table.min.js',\n\t\t\t\t\t\t\t'app/vendors/bootstrap-table-angular.min.js',\n\t\t\t\t\t\t\t'assets/js/locale/bootstrap-table-zh-CN.min.js',\n\t\t\t\t\t\t\t'assets/js/locale/bootstrap-table-en-US.min.js',\n\t\t\t\t\t\t\t'app/vendors/angular-daterangepicker.min.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalEventDetailsCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalTimeSeriesCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalHighRateCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalDetailsCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/modalMapCtrl.js',\n\t\t\t\t\t\t\t'app/modules/remote/siteTableCtrl.js'\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}]\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"site\"\n\t\t\t},\n\t\t})\n\t\t.when('/gis', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/network/gis.html',\n\t\t\tcontroller: 'gisController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load({\n\t\t\t\t\t\tserie: true,\n\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t'app/modules/network/gisCtrl.js'\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}]\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"gis\"\n\t\t\t}\n\t\t})\n\t\t.when('/network-analysis', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/network/networkAnalysis.html',\n\t\t\tcontroller: 'networkAnalysisController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load({\n\t\t\t\t\t\tserie: true,\n\t\t\t\t\t\tfiles: [\n\t\t\t\t\t\t\t'app/modules/network/networkAnalysisCtrl.js'\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t}]\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"networkAnalysis\"\n\t\t\t}\n\t\t})\n\t\t.when('/network-data', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/network/networkData.html',\n\t\t\tcontroller: 'networkDataController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load([\n\t\t\t\t\t\t'app/modules/network/networkDataCtrl.js',\n\t\t\t\t\t\t'app/vendors/angular-daterangepicker.min.js',\n\t\t\t\t\t\t'app/modules/remote/modalEventDetailsCtrl.js',\n\t\t\t\t\t\t'app/modules/remote/modalTimeSeriesCtrl.js',\n\t\t\t\t\t\t'app/modules/remote/modalHighRateCtrl.js'\n\t\t\t\t\t]);\n\t\t\t\t}]\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"network_data\"\n\t\t\t}\n\t\t})\n\t\t.when('/monitoring', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/monitor/monitor.html',\n\t\t\tcontroller: 'monitorController as vm',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: true,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tresolve: {\n\t\t\t\tloadMyCtrl: ['$ocLazyLoad', function($ocLazyLoad) {\n\t\t\t\t\treturn $ocLazyLoad.load([\n\t\t\t\t\t\t'app/vendors/fastRepeat.js',\n\t\t\t\t\t\t'app/vendors/ng-infinite-scroll.min.js',\n\t\t\t\t\t\t'app/modules/monitor/monitorCtrl.js'\n\t\t\t\t\t]);\n\t\t\t\t}]\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"monitor\"\n\t\t\t}\n\t\t})\n\t\t.when('/login', {\n\t\t\ttemplateUrl: __env.folder+'/app/modules/auth/login.html',\n\t\t\tcontroller: 'authLoginController',\n\t\t\tcontrollerAs: 'authLoginCtrl',\n\t\t\trestrictions: {\n\t\t\t\tensureAuthenticated: false,\n\t\t\t\tloginRedirect: false\n\t\t\t},\n\t\t\tpage_params: {\n\t\t\t\tkey: \"login\"\n\t\t\t},\n\t\t}).otherwise({\n\t\t\tredirectTo: '/main'\n\t\t});\n\t}\n})();","/* global angular, __env */\n(function() {\n\t'use strict';\n\tangular\n\t\t.module('xProject.services', [])\n\t\t.service('authService', authService)\n\t\t.service('commonService', commonService)\n\t\t.service('apiService', apiService);\n\n\tauthService.$inject = ['$http','localStorageService','$httpParamSerializerJQLike'];\n\tapiService.$inject = ['$http','localStorageService','$httpParamSerializerJQLike','authService'];\n\n\tfunction authService($http, localStorageService, $httpParamSerializerJQLike) {\n\t\tvar _authentication_info = { //default object\n\t\t\tisAuth: false,\n\t\t\tusername: \"\",\n\t\t\ttoken: \"\",\n\t\t\trole: \"\",\n\t\t\tprojects:[],\n\t\t\tcurrent_project: {\n\t\t\t\tname: \"\"\n\t\t\t},\n\t\t\ttimezone: \"\",\n\t\t\tlang: \"\",\n\t\t\tapps: {}\n\t\t};\n\t\t/*jshint validthis: true */\n\t\tthis.login = function(user) {\n\t\t\treturn $http({\n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: __env.userLoginUrl,\n\t\t\t\tdata: $httpParamSerializerJQLike(user),\n\t\t\t\theaders: {'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'} //due to xproject backend required this\n\t\t\t\t//headers: {'Content-Type': 'application/json'} //application/json\n\t\t\t});\n\t\t};\n\t\tthis.switchProject = function(projectId){\n\t\t\tvar params = {projectid: projectId, token: this.getAuthentication().token};\n\t\t\treturn $http({\n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: __env.switchProjectUrl,\n\t\t\t\tdata: $httpParamSerializerJQLike(params),\n\t\t\t\theaders: {'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}\n\t\t\t});\n\t\t};\n\t\tthis.updateProject = function(res){\n\t\t\tvar opts_res = angular.extend({}, this.getAuthentication(), res);\n\t\t\tif(angular.isDefined(res.token) && res.token!==\"\"){\n\t\t\t\topts_res.isAuth = true;\n\t\t\t}\n\t\t\tlocalStorageService.set('authorizationData', opts_res);\n\t\t};\n\t\t/*this.ensureAuthenticated = function(token) { //unused for now\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: userBaseURL + 'user',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\tAuthorization: 'Bearer ' + token\n\t\t\t\t}\n\t\t\t});\n\t\t};*/\n\t\tthis.setAuthentication = function(res){\n\t\t\tvar opts_res = angular.extend({}, _authentication_info, res);\n\t\t\tif(angular.isDefined(res.token) && res.token!==\"\"){\n\t\t\t\topts_res.isAuth = true;\n\t\t\t}\n\t\t\t//console.log('#set authorizationData');\n\t\t\t//console.log(opts_res);\n\t\t\tlocalStorageService.set('authorizationData', opts_res);\n\t\t\tthis.getAuthentication();\n\t\t};\n\t\tthis.isLoggedIn = function(){\n\t\t\tvar user_info = this.getAuthentication();\n\t\t\tvar isAuth = (angular.isDefined(user_info.isAuth) && user_info.isAuth);\n\t\t\tvar isToken = (angular.isDefined(user_info.token) && user_info.token!==\"\");\n\t\t\treturn (isAuth && isToken);\n\t\t};\n\t\tthis.getAuthentication = function(){\n\t\t\tvar auth_res = localStorageService.get('authorizationData');\n\t\t\tif(auth_res===null){\n\t\t\t\tauth_res = _authentication_info;\n\t\t\t}\n\t\t\treturn auth_res;\n\t\t};\n\t\tthis.logout = function(){\n\t\t\tlocalStorageService.set('authorizationData', _authentication_info);\n\t\t\tthis.updateProject(_authentication_info);\n\t\t};\n\t}\n\n\tfunction commonService(){\n\t\t/*jshint validthis: true */\n\t\tthis.getColors = function() {\n\t\t\treturn [\"#FF1493\",\"#FFA500\",\"#0f7ca8\",\"#3867c4\",\"#96137c\",\"#b79494\",\"#f9b49d\",\"#c60303\",\"#008066\",\"#823f5e\",\"#687759\",\"#d14959\",\"#703e7f\",\"#000000\"];\n\t\t};\n\t\tthis.markerConfig = function(){\n\t\t\treturn {\n\t\t\t\ticon: 'assets/images/map/marker_n.png',\n\t\t\t\twidth: 30,\n\t\t\t\theight: 38,\n\t\t\t\ttitle: '',\n\t\t\t\tcontent: ''\n\t\t\t};\n\t\t};\n\t}\n\n\tfunction apiService($http, localStorageService, $httpParamSerializerJQLike, authService){\n\t\tvar apiBaseURL = __env.baseUrl;\n\t\tvar headers = {'Pragma': undefined, 'Cache-Control': undefined, 'X-Requested-With': undefined, 'If-Modified-Since': undefined, 'Content-Type': 'application/json'};\n\t\t//var headers = {'Content-Type': 'application/json'};\n\t\t/*jshint validthis: true */\n\t\tthis.siteApi = function(string){\n\t\t\tvar configArr = {\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: apiBaseURL + 'site/search',\n\t\t\t\theaders: headers,\n\t\t\t\tdata: $httpParamSerializerJQLike()\n\t\t\t};\n\t\t\tif(typeof string!==\"undefined\" && string!==\"\"){\n\t\t\t\tconfigArr.url = configArr.url+\"?query=\"+string;\n\t\t\t}\n\t\t\treturn $http(configArr);\n\t\t};\n\n\t\tthis.timeSeriesAnyApi = function(id){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.timeSeriesAnyUrl+\"/\"+id+\"/any\",\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.timeSeriesHighRateApi = function(res){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.timeSeriesAnyUrl+\"/\"+res.id+\"/highrate/\"+res.from+\"/\"+res.to,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.timeSeriesRangeApi = function(params){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.timeSeriesRangeUrl+\"/\"+params.datapoints+\"/\"+params.resolution+\"/\"+params.from+\"/\"+params.to,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.batchTimeSeriesApi = function(params){\n\t\t\tvar defaultParams = {\n\t\t\t\tdatapoints: \"\",\n\t\t\t\tresolution: \"1n\",\n\t\t\t\tfrom: \"1498875720000\", //july\n\t\t\t\tto: \"1515549960000\", //jan 2018\n\t\t\t\ttoken: authService.getAuthentication().token\n\t\t\t};\n\t\t\tvar userParams = $.extend(true, defaultParams, params);\n\t\t\treturn $http({\n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: __env.batchTimeSeriesUrl,\n\t\t\t\tdata: $httpParamSerializerJQLike(userParams),\n\t\t\t\theaders: {'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'}\n\t\t\t});\n\t\t};\n\n\t\tthis.eventAnyApi = function(){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventAnyUrl,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.eventAnyApiPaging = function(page){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventAnyUrl+\"/\"+page,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.eventDurationApi = function(res){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventDurationUrl+\"/\"+res.to+\"/\"+res.duration,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.eventMonitorApi = function(id, time){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventDurationUrl+\"/\"+id+\"/\"+time,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.eventRangeApi = function(from, to){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventRangeUrl+\"/\"+from+\"/\"+to,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.eventSingleRangeApi = function(datapointId, from, to){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventSingleRangeUrl+\"/\"+datapointId+\"/\"+from+\"/\"+to,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.eventDetailsApi = function(eventId){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.eventDetailsUrl+\"/\"+eventId,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.boundaryApi = function(){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: apiBaseURL + 'map/boundary',\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\n\t\tthis.heatMapApi = function(){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: apiBaseURL + 'map/heatmap',\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.sensorApi = function(query){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: apiBaseURL + 'map/sensorjunction?query='+query,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.pipeApi = function(query){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: apiBaseURL + 'map/pipe?query='+query,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkSensorApi = function(query){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkSensorUrl,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkPipeApi = function(query){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkPipeUrl,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkPipeSummaryApi = function(){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkPipeSummaryUrl,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkAnalysisPipeApi = function(query){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkAnalysisPipeUrl,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkAnalysisCoverageApi = function(id){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkAnalysisSensorCoverageUrl+'?site='+id,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkPumpApi = function(){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkPumpUrl,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkHydrantApi = function(mapcenter){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkHydrantUrl+'?mapcenter='+mapcenter,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t\tthis.networkPipeDetailsApi = function(mapcenter){\n\t\t\treturn $http({\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: __env.networkPipeDetailsUrl+'?mapcenter='+mapcenter,\n\t\t\t\theaders: headers\n\t\t\t});\n\t\t};\n\t}\n})();","/* global angular, BMap, xpro, __env, BMapLib, BMAP_ANCHOR_TOP_RIGHT, BMAP_ANIMATION_BOUNCE */\n(function() {\n\t'use strict';\n\tangular\n\t\t.module('xProject.directive', ['ui.bootstrap'])\n\t\t.directive('xproMap', xproMap)\n\t\t.directive('xproHeatmap', xproHeatmap)\n\t\t.directive('xproNetworkMap', xproNetworkMap)\n\t\t.directive('projectDropdown', projectDropdown)\n\t\t.directive('canvasToolbar', canvasToolbar)\n\t\t.directive('elemReady', elemReady)\n\t\t.service('mapApi', mapApi)\n\t\t.service('heatmapApi', heatmapApi);\n\n\t//global defined\n\tvar heatmapOverlay;\n\n\tfunction canvasToolbar(){\n\t\treturn {\n\t\t\trestrict: 'AE',\n\t\t\tscope: {\n\t\t\t\toptions: '='\n\t\t\t},\n\t\t\ttemplate: '<div class=\"btn-group\" role=\"group\"><button type=\"button\" class=\"btn btn-secondary\" data-state=\"pan\" data-value=\"pan\" data-toggle=\"tooltip\" title=\"Pan Move\"><i class=\"ti-split-h\"></i></button><button type=\"button\" class=\"btn btn-secondary\" data-state=\"reset\" data-toggle=\"tooltip\" title=\"Reset Zoom\"><i class=\"ti-close\"></i></button></div>',\n\t\t\tlink: function (scope, elem) {\n\t\t\t\tvar default_opts = {\n\t\t\t\t\tchartElem: null,\n\t\t\t\t\tmin: 0,\n\t\t\t\t\tmax: 0\n\t\t\t\t};\n\t\t\t\tvar opts = angular.extend({}, default_opts, scope.options);\n\n\t\t\t\tcanvasAction(elem, opts);\n\t\t\t\telem.on('click','button[data-state=\"pan\"]',function(){\n\t\t\t\t\ttogglePan($(this), opts);\n\t\t\t\t});\n\t\t\t\telem.on('click','button[data-state=\"reset\"]',function(){\n\t\t\t\t\tvar toolbar = $('#'+opts.chartElem).find('.canvasjs-chart-toolbar');\n\t\t\t\t\ttoolbar.find('button[state=\"reset\"]').click();\n\t\t\t\t\txpro.destroyTooltip();\n\t\t\t\t});\n\t\t\t\tscope.$watch('options', function(newValue, oldValue) {\n\t\t\t\t\tif (newValue !== oldValue) {\n\t\t\t\t\t\topts = angular.extend({}, default_opts, newValue);\n\t\t\t\t\t\tcanvasAction(elem, opts);\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t}\n\t\t};\n\t}\n\tfunction canvasAction(elem, opts){\n\t\tvar chart = $('#'+opts.chartElem);\n\t\tchart.find('.canvasjs-chart-toolbar').addClass('hide');\n\t\tif(opts.min<=0 && opts.max<=0){\n\t\t\t$(elem).hide();\n\t\t}else{\n\t\t\t$(elem).show();\n\t\t}\n\t\ttogglePan($(elem).find('[data-state=\"pan\"]'), opts, true);\n\t}\n\tfunction togglePan(btnElem, opts, isTrigger){\n\t\tvar panElem = btnElem,\n\t\ttoolbar = $('#'+opts.chartElem).find('.canvasjs-chart-toolbar'),\n\t\tvalue = panElem.data('value'),\n\t\tpanActive = panElem.hasClass('isactive');\n\n\t\tif(typeof isTrigger!==\"undefined\" && isTrigger){\n\t\t\tif(value===\"pan\"){\n\t\t\t\ttoolbar.find('button[state=\"zoom\"]').click();\n\t\t\t}else if(value===\"zoom\"){\n\t\t\t\ttoolbar.find('button[state=\"pan\"]').click();\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tif(panActive){\n\t\t\ttoolbar.find('button[state=\"zoom\"]').click();\n\t\t\tpanElem.data('original-title', 'Pan Move').data('value','pan').removeClass('isactive').find('i').attr('class','ti-split-h');\n\t\t}else{\n\t\t\ttoolbar.find('button[state=\"pan\"]').click();\n\t\t\tpanElem.data('original-title','Zoom').data('value','zoom').addClass('isactive').find('i').attr('class','ti-zoom-in');\n\t\t}\n\t\txpro.destroyTooltip();\n\t\txpro.tooltips();\n\t}\n\n\t/* get dom ready\n\t*/\n\telemReady.$inject = ['$parse'];\n\tfunction elemReady($parse){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\tlink: link\n\t\t};\n\t\tfunction link($scope, elem, attrs){\n\t\t\telem.ready(function(){\n\t\t\t\t$scope.$apply(function(){\n\t\t\t\t\tvar func = $parse(attrs.elemReady);\n\t\t\t\t\tfunc($scope);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t/* switching project from dropdown\n\t*/\n\tprojectDropdown.$inject = ['authService','$location'];\n\tfunction projectDropdown(authService,$location){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\tscope: {\n\t\t\t\toptions: '='\n\t\t\t},\n\t\t\ttemplate: '<a href=\"JavaScript:void(0);\" class=\"dropdown-item\" ng-repeat=\"(key, val) in data.projects\" ng-class=\"{active : data.current_project._id == key}\" ng-click=\"switch(key)\">{{ val }}</a>',\n\t\t\tcontroller: function ($scope) {\n\t\t\t\t$scope.data = $scope.options;\n\t\t\t\t$scope.switch = function(key){\n\t\t\t\t\tif(key!==$scope.data.current_project._id){\n\t\t\t\t\t\tauthService.switchProject(key).then(function(response){\n\t\t\t\t    \t\t\tif(angular.isDefined(response.data.token)){\n\t\t\t\t    \t\t\t\tauthService.updateProject(response.data);\n\t\t\t\t    \t\t\t\t$scope.data = response.data;\n\t\t\t\t    \t\t\t\t$location.path(__env.pageMain);\n\t\t\t\t    \t\t\t}\n\t\t\t\t    \t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\t//xproMap.$inject = [];\n\t/* baidu map\n\t*/\n\txproMap.$inject = ['modalService','mapApi','$translate'];\n\tfunction xproMap(modalService, mapApi, $translate) {\n\t\treturn{\n\t\t\trestrict: 'AE',\n\t\t\treplace: 'true',\n\t\t\tscope:{\n\t\t\t\tinfo: '@',\n\t\t\t\toptions: '=',\n\t\t\t\tonMapLoaded: '&'\n\t\t\t},\n\t\t\tlink: function(scope, elem/*, attrs*/) {\n\t\t\t\tvar topHt = $('.topbar').outerHeight();\n\t\t\t\telem.css('height',$(window).height()-topHt);\n\t\t\t\t$(window).resize(function(){\n\t\t\t\t\telem.css('height',$(window).height()-topHt);\n\t\t\t\t});\n\n\t\t\t\tscope.initialize = function() {\n\t\t\t\t\tvar default_opts = {\n\t\t\t\t\t\tnavCtrl: true,\n\t\t\t\t\t\tscaleCtrl: true,\n\t\t\t\t\t\toverviewCtrl: true,\n\t\t\t\t\t\tenableScrollWheelZoom: true,\n\t\t\t\t\t\tenableAutoResize: true,\n\t\t\t\t\t\tzoom: 10,\n\t\t\t\t\t\tmapType: \"map\",\n\t\t\t\t\t\tfullScreen: false\n\t\t\t\t\t};\n\t\t\t\t\tvar opts = angular.extend({}, default_opts, scope.options);\n\t\t\t\t\tvar map = createMapInstance(opts, elem);\n\t\t\t\t\tvar previousMarkers = [];\n\n\t\t\t\t\t//create markers\n\t\t\t\t\tredrawMarkers(map, $translate, previousMarkers, opts, scope, modalService);\n\t\t\t\t\t//set boundary\n\t\t\t\t\tboundaryArea(map, opts);\n\n\t\t\t\t\tscope.$watch('options.markers', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\tredrawMarkers(map, $translate, previousMarkers, opts, scope, modalService);\n\t\t\t\t\t}, true);\n\t\t\t\t\tscope.$watch('options.boundary', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\tboundaryArea(map, opts, scope);\n\t\t\t\t\t}, true);\n\t\t\t\t};\n\t\t\t\tmapApi.then(function () {\n\t\t\t\t\tscope.initialize();\n\t\t\t\t}, function () {\n\t\t\t\t\t// Promise rejected\n\t\t\t\t});\n\n\t\t\t},\n\t\t\ttemplate: '<div ng-style=\"divStyle\"><label ng-style=\"labelStyle\"></label></div>'\n\t\t};\n\t}\n\n\t/* baidu heatmap\n\t*/\n\txproHeatmap.$inject = ['$translate','mapApi'];\n\tfunction xproHeatmap($translate, mapApi){\n\t\treturn{\n\t\t\trestrict: 'AE',\n\t\t\treplace: 'true',\n\t\t\tscope:{\n\t\t\t\tinfo: '@',\n\t\t\t\toptions: '=',\n\t\t\t\tonMapLoaded: '&'\n\t\t\t},\n\t\t\tlink: function(scope, elem/*, attrs*/) {\n\t\t\t\tvar topHt = $('.topbar').outerHeight();\n\t\t\t\telem.css('height',$(window).height()-topHt);\n\t\t\t\t$(window).resize(function(){\n\t\t\t\t\telem.css('height',$(window).height()-topHt);\n\t\t\t\t});\n\n\t\t\t\tscope.initialize = function() {\n\t\t\t\t\tvar default_opts = {\n\t\t\t\t\t\tnavCtrl: true,\n\t\t\t\t\t\tscaleCtrl: true,\n\t\t\t\t\t\toverviewCtrl: true,\n\t\t\t\t\t\tenableScrollWheelZoom: true,\n\t\t\t\t\t\tzoom: 10,\n\t\t\t\t\t\tmapType: \"heatmap\",\n\t\t\t\t\t\tfullScreen: false\n\t\t\t\t\t};\n\t\t\t\t\tvar opts = angular.extend({}, default_opts, scope.options);\n\t\t\t\t\tvar map = createMapInstance(opts, elem, $translate);\n\t\t\t\t\tvar previousMarkers = [];\n\t\t\t\t\t//create markers\n\t\t\t\t\tredrawMarkers(map, $translate, previousMarkers, opts, scope);\n\n\n\t\t\t\t\t//watch markers\n\t\t\t\t\tscope.$watch('options.markers', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\tredrawMarkers(map, $translate, previousMarkers, opts, scope);\n\t\t\t\t\t}, true);\n\t\t\t\t\t//watch pipe\n\t\t\t\t\tscope.$watch('options.pipes', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\tdrawPipeArea(map, opts, scope);\n\t\t\t\t\t}, true);\n\n\t\t\t\t\t//watch heatmap\n\t\t\t\t\tscope.$watch('options.heatMap', function (newValue/*, oldValue*/) {\n\t\t\t\t\t\tif(newValue.length){\n\t\t\t\t\t\t\tmap.addEventListener(\"tilesloaded\",drawHeatMap(map, opts));\n\t\t\t\t\t\t}\n\t\t\t\t\t}, true);\n\t\t\t\t};\n\t\t\t\tmapApi.then(function () {\n\t\t\t\t\tscope.initialize();\n\t\t\t\t}, function () {\n\t\t\t\t\t// Promise rejected\n\t\t\t\t});\n\n\t\t\t},\n\t\t\ttemplate: '<div ng-style=\"divStyle\"><label ng-style=\"labelStyle\"></label></div>'\n\t\t};\n\t}\n\n\t/* network map - gis, network\n\t* updated - 4/1/2018\n\t*/\n\txproNetworkMap.$inject = ['$translate','mapApi','apiService','dialogService','modalService','notify'];\n\tfunction xproNetworkMap($translate, mapApi, apiService, dialogService, modalService, notify){\n\t\treturn{\n\t\t\trestrict: 'AE',\n\t\t\treplace: 'true',\n\t\t\tscope:{\n\t\t\t\tinfo: '@',\n\t\t\t\toptions: '=',\n\t\t\t\tonMapLoaded: '&'\n\t\t\t},\n\t\t\tlink: function(scope, elem/*, attrs*/) {\n\t\t\t\tvar topHt = $('.topbar').outerHeight();\n\t\t\t\telem.css('height',$(window).height()-topHt);\n\t\t\t\t$(window).resize(function(){\n\t\t\t\t\telem.css('height',$(window).height()-topHt);\n\t\t\t\t});\n\t\t\t\tscope.initialize = function() {\n\t\t\t\t\tvar default_opts = {\n\t\t\t\t\t\tnavCtrl: true,\n\t\t\t\t\t\tscaleCtrl: true,\n\t\t\t\t\t\toverviewCtrl: true,\n\t\t\t\t\t\tenableScrollWheelZoom: true,\n\t\t\t\t\t\tzoom: 10,\n\t\t\t\t\t\tmapType: \"networkmap\",\n\t\t\t\t\t\tfullScreen: false\n\t\t\t\t\t};\n\t\t\t\t\tvar opts = angular.extend({}, default_opts, scope.options);\n\t\t\t\t\tvar map = createMapInstance(opts, elem, $translate);\n\t\t\t\t\tvar previousMarkers = [];\n\t\t\t\t\t//create markers\n\t\t\t\t\t//redrawMarkers(map, $translate, previousMarkers, opts, scope, null, apiService, dialogService);\n\n\t\t\t\t\t//watch markers\n\t\t\t\t\tscope.$watch('options.markers', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\tredrawMarkers(map, $translate, previousMarkers, opts, scope, null, apiService, dialogService);\n\t\t\t\t\t}, true);\n\t\t\t\t\t//watch menus\n\t\t\t\t\tscope.$watch('options.menus', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\tcreateNetworkMenu(map, opts, $translate, apiService, dialogService, notify);\n\t\t\t\t\t}, true);\n\t\t\t\t\t//watch pipe\n\t\t\t\t\tif(angular.isDefined(opts.pipes)){\n\t\t\t\t\t\tscope.$watch('options.pipes', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\t\tdrawPipeArea(map, opts, scope);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t}\n\t\t\t\t\t//watch pump\n\t\t\t\t\tif(angular.isDefined(opts.pumps)){\n\t\t\t\t\t\tscope.$watch('options.pumps', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\t\tdrawPumps(map, opts, scope);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t}\n\t\t\t\t\t//watch plotMarkers - network data\n\t\t\t\t\tif(angular.isDefined(opts.plotMarkers)){\n\t\t\t\t\t\tscope.$watch('options.plotMarkers', function (/*newValue, oldValue*/) {\n\t\t\t\t\t\t\tcreatePlotMarkerCart(map, opts, scope, $translate, modalService);\n\t\t\t\t\t\t}, true);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tmapApi.then(function () {\n\t\t\t\t\tscope.initialize();\n\t\t\t\t}, function () {\n\t\t\t\t\t// Promise rejected\n\t\t\t\t});\n\t\t\t},\n\t\t\ttemplate: '<div ng-style=\"divStyle\"><label ng-style=\"labelStyle\"></label></div>'\n\t\t};\n\t}\n\n\tmapApi.$inject = ['$window','$q'];\n\tfunction mapApi($window, $q){\n\t\tvar deferred = $q.defer();\n\n\t\t// Load Google map API script\n\t\tfunction loadScript() {\n\t\t\t// Use global document since Angular's $document is weak\n\t\t\tvar script = document.createElement('script');\n\t\t\t// script.src = \"http://api.map.baidu.com/api?v=2.0&ak=您的密钥&callback=init\";\n\t\t\tscript.src = 'https://api.map.baidu.com/api?v=2.0&ak=CSFSaXio89D3WK1AB38sLNtnkV9fWZO4&callback=initMap';\n\t\t\tdocument.body.appendChild(script);\n\t\t}\n\n\t\t// Script loaded callback, send resolve\n\t\t$window.initMap = function () {\n\t\t\tdeferred.resolve();\n\t\t};\n\n\t\tloadScript();\n\t\treturn deferred.promise;\n\t}\n\n    \theatmapApi.$inject = ['$window','$q'];\n\tfunction heatmapApi($window, $q){\n\t\tvar deferred = $q.defer();\n\n\t\t// Load Google map API script\n\t\tfunction loadScript() {\n\t\t\t// Use global document since Angular's $document is weak\n\t\t\tvar script = document.createElement('script');\n\t\t\tscript.src = '';\n\t\t\tdocument.body.appendChild(script);\n\t\t}\n\n\t\t// Script loaded callback, send resolve\n\t\t$window.initMap = function () {\n\t\t\tdeferred.resolve();\n\t\t};\n\t\tloadScript();\n\t\treturn deferred.promise;\n\t}\n\n\tfunction moveMapToCenter(map, opts){\n\t\tvar points = [];\n\t\topts.boundary.forEach(function (loc) {\n\t\t\tpoints.push(new BMap.Point(loc.longitude, loc.latitude));\n\t\t});\n\t\tmap.setViewport(points);\n\t}\n\n\tfunction fullscreenControl(){\n\t\t/*jshint validthis:true */\n\t\tthis.defaultAnchor = BMAP_ANCHOR_TOP_RIGHT;\n\t\tthis.defaultOffset = new BMap.Size(10, 10);\n\t}\n\n\tfunction toggleHeatMapButtons(){\n\t\t/*jshint validthis:true */\n\t\tthis.defaultAnchor = BMAP_ANCHOR_TOP_RIGHT;\n\t\tthis.defaultOffset = new BMap.Size(50, 10);\n\t}\n\n\tfunction toggleNetworkMapButtons(){\n\t\t/*jshint validthis:true */\n\t\tthis.defaultAnchor = BMAP_ANCHOR_TOP_RIGHT;\n\t\tthis.defaultOffset = new BMap.Size(10, 10);\n\t}\n\n\t/* create selected plot marker in the cart list\n\t*/\n\tfunction createPlotMarkerCart(map, opts, scope, $translate, modalService){\n\t\tvar container = $('#cart_options_list');\n\t\tvar lenMarker = opts.plotMarkers.length;\n\t\tvar html = \"\";\n\t\tif(lenMarker){\n\t\t\thtml += \"<ul class='list-group'>\";\n\t\t\tfor(var i=0, len=lenMarker; i<len; i++){\n\t\t\t\thtml += \"<li class='list-group-item'>\"+opts.plotMarkers[i].name+\"<a class='remove-cart' data-toggle='remove_cart' data-id='\"+opts.plotMarkers[i].datapoint.pressure._id+\"' href='JavaScript:void(0);'><i class='ti-close'></i></a></li>\";\n\t\t\t}\n\t\t\thtml += \"</ul>\";\n\t\t\thtml += \"<div class='footer-action'>\";\n\t\t\t\thtml += \"<div class='btn-group'>\";\n\t\t\t\t\thtml += \"<button type='button' class='btn btn-secondary' data-toggle='empty_cart'><i class='ti-trash'></i></button>\";\n\t\t\t\t\thtml += \"<button type='button' class='btn btn-primary' data-toggle='modal_plot'><i class='ti-stats-up'></i></button>\";\n\t\t\t\thtml += \"</div>\";\n\t\t\thtml += \"</div>\";\n\t\t}else{\n\t\t\thtml += \"<h3 class='text-center m-t-20 text-muted'>\"+$translate.instant('site_network_data_plot_no_sensor_found')+\"</h3>\";\n\t\t}\n\t\tcontainer.html(html);\n\t\tvar count = document.getElementById('count_badge');\n\t\tcount.innerHTML = lenMarker;\n\t\tcontainer.off().on('click','[data-toggle=\"remove_cart\"]', function(){\n\t\t\tremovePlotMarker(map, opts, scope, $(this).data('id'));\n\t\t}).on('click','[data-toggle=\"empty_cart\"]', function(){\n\t\t\tremovePlotMarker(map, opts, scope);\n\t\t}).on('click','[data-toggle=\"modal_plot\"]', function(){\n\t\t\tmodalService.open(opts.modalUrl, opts.modalCtrl, opts.plotMarkers);\n\t\t});\n\t}\n\t/* remove plot marker cart\n\t*/\n\tfunction removePlotMarker(map, opts, $scope, id){\n\t\tif(angular.isDefined(id)){\n\t\t\tangular.forEach(opts.plotMarkers, function(value, index){\n\t\t\t\tif(value.datapoint.pressure._id===id){\n\t\t\t\t\topts.plotMarkerInstance[index].setAnimation(null);\n\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\topts.plotMarkerInstance.splice(index, 1);\n\t\t\t\t\t\t$scope.options.plotMarkers.splice(index, 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tangular.forEach(opts.plotMarkerInstance, function(value){\n\t\t\t\tvalue.setAnimation(null);\n\t\t\t});\n\t\t\t$scope.$apply(function() {\n\t\t\t\topts.plotMarkerInstance.length = 0;\n\t\t\t\t$scope.options.plotMarkers.length = 0;\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction createHeatMapButtons(map, opts, element, $translate){\n\t\tif(opts.mapType===\"heatmap\"){\n\t\t\ttoggleHeatMapButtons.prototype = new BMap.Control();\n\t\t\ttoggleHeatMapButtons.prototype.initialize = function(map){\n\t\t\t\tvar div = document.createElement(\"div\");\n\t\t\t\tdiv.className = \"btn-group\";\n\t\t\t\tdiv.setAttribute(\"data-toggle\",\"buttons\");\n\n\t\t\t\t//first button\n\t\t\t\tvar labelHeatMap = document.createElement(\"label\");\n\t\t\t\tlabelHeatMap.className = \"btn btn-secondary btn-outline btn-sm active\";\n\t\t\t\tlabelHeatMap.setAttribute(\"for\",\"toggle_heatmap\");\n\t\t\t\tvar chkHeatMap = document.createElement(\"input\");\n\t\t\t\tchkHeatMap.type = \"checkbox\";\n\t\t\t\tchkHeatMap.setAttribute(\"name\",\"toggle_heatmap\");\n\t\t\t\tchkHeatMap.setAttribute(\"id\",\"toggle_heatmap\");\n\t\t\t\tchkHeatMap.setAttribute(\"checked\",\"checked\");\n\t\t\t\tlabelHeatMap.append(chkHeatMap);\n\t\t\t\tlabelHeatMap.innerHTML += $translate.instant('site_city_heatmap_toolbar_heatmap');\n\n\t\t\t\t//second button\n\t\t\t\tvar labelPipe = document.createElement(\"label\");\n\t\t\t\tlabelPipe.className = \"btn btn-secondary btn-outline btn-sm active\";\n\t\t\t\tlabelPipe.setAttribute(\"for\",\"toggle_pipe\");\n\t\t\t\tvar chkPipe = document.createElement(\"input\");\n\t\t\t\tchkPipe.type = \"checkbox\";\n\t\t\t\tchkPipe.setAttribute(\"name\",\"toggle_pipe\");\n\t\t\t\tchkPipe.setAttribute(\"id\",\"toggle_pipe\");\n\t\t\t\tchkPipe.setAttribute(\"checked\",\"checked\");\n\t\t\t\tlabelPipe.append(chkPipe);\n\t\t\t\tlabelPipe.innerHTML += $translate.instant('site_city_heatmap_toolbar_pipe');\n\n\t\t\t\t//third button\n\t\t\t\tvar labelMarker = document.createElement(\"label\");\n\t\t\t\tlabelMarker.className = \"btn btn-secondary btn-outline btn-sm active\";\n\t\t\t\tlabelMarker.setAttribute(\"for\",\"toggle_marker\");\n\t\t\t\tvar chkMarker = document.createElement(\"input\");\n\t\t\t\tchkMarker.type = \"checkbox\";\n\t\t\t\tchkMarker.setAttribute(\"name\",\"toggle_marker\");\n\t\t\t\tchkMarker.setAttribute(\"id\",\"toggle_marker\");\n\t\t\t\tchkMarker.setAttribute(\"checked\",\"checked\");\n\t\t\t\tlabelMarker.append(chkMarker);\n\t\t\t\tlabelMarker.innerHTML += $translate.instant('site_city_heatmap_toolbar_sensor');\n\n\t\t\t\tdiv.appendChild(labelHeatMap);\n\t\t\t\tdiv.appendChild(labelPipe);\n\t\t\t\tdiv.appendChild(labelMarker);\n\n\t\t\t\tlabelHeatMap.onchange = function(/*e*/){\n\t\t\t\t\tvar isOn = document.getElementById('toggle_heatmap').checked;\n\t\t\t\t\tif(typeof heatmapOverlay!==\"undefined\"){\n\t\t\t\t\t\tif(isOn){\n\t\t\t\t\t\t\theatmapOverlay.show();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\theatmapOverlay.hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tlabelPipe.onchange = function(/*e*/){\n\t\t\t\t\tvar isOn = document.getElementById('toggle_pipe').checked;\n\t\t\t\t\tvar allOverlay = map.getOverlays();\n\t\t\t\t\tfor (var i = 0; i < allOverlay.length -1; i++){\n\t\t\t\t\t\tif(allOverlay[i].toString()===\"[object Polyline]\"){\n\t\t\t\t\t\t\tif(isOn){\n\t\t\t\t\t\t\t\tallOverlay[i].show();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tallOverlay[i].hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tlabelMarker.onchange = function(/*e*/){\n\t\t\t\t\tvar isOn = document.getElementById('toggle_marker').checked;\n\t\t\t\t\tvar allOverlay = map.getOverlays();\n\t\t\t\t\tfor (var i = 0; i < allOverlay.length -1; i++){\n\t\t\t\t\t\tif(allOverlay[i].toString()===\"[object Marker]\"){\n\t\t\t\t\t\t\tif(isOn){\n\t\t\t\t\t\t\t\tallOverlay[i].show();\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tallOverlay[i].hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// 添加DOM元素到地图中\n\t\t\t\tmap.getContainer().appendChild(div);\n\t\t\t\t// 将DOM元素返回\n\t\t\t\treturn div;\n\t\t\t};\n\t\t\t// 创建控件\n\t\t\tvar myCtrl = new toggleHeatMapButtons();\n\t\t\t// 添加到地图当中\n\t\t\tmap.addControl(myCtrl);\n\t\t}\n\t}\n\n\tfunction createFullScreen(map, opts, element){\n\t\tif(opts.fullScreen){\n\t\t\tfullscreenControl.prototype = new BMap.Control();\n\t\t\tfullscreenControl.prototype.initialize = function(map){\n\t\t\t\t// 创建一个DOM元素\n\t\t\t\tvar zoomBtn = document.createElement(\"div\");\n\t\t\t\tzoomBtn.className = \"btn waves-effect waves-light btn-secondary btn-sm\";\n\t\t\t\tvar zoomIcon = document.createElement(\"i\");\n\t\t\t\tzoomIcon.className = \"ti-fullscreen\";\n\t\t\t\t// 添加文字说明\n\t\t\t\tzoomBtn.appendChild(zoomIcon);\n\t\t\t\t// 绑定事件,点击一次放大两级\n\t\t\t\tzoomBtn.onclick = function(/*e*/){\n\t\t\t\t\t//map.setZoom(map.getZoom() + 2);\n\t\t\t\t\tif($(element).hasClass('map-fullscreen')){\n\t\t\t\t\t\t$(element).removeClass('map-fullscreen');\n\t\t\t\t\t\tzoomIcon.className = \"ti-fullscreen\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$(element).addClass('map-fullscreen');\n\t\t\t\t\t\tzoomIcon.className = \"ti-back-left\";\n\t\t\t\t\t}\n\n\t\t\t\t};\n\t\t\t\t// 添加DOM元素到地图中\n\t\t\t\tmap.getContainer().appendChild(zoomBtn);\n\t\t\t\t// 将DOM元素返回\n\t\t\t\treturn zoomBtn;\n\t\t\t};\n\t\t\t// 创建控件\n\t\t\tvar myZoomCtrl = new fullscreenControl();\n\t\t\t// 添加到地图当中\n\t\t\tmap.addControl(myZoomCtrl);\n\t\t}\n\t}\n\n\tfunction createMapInstance(opts, element, $translate){\n\t\tvar map = new BMap.Map(element[0]);    // 创建Map实例\n\t\t/*\tbelow line will force map to be centralize based on this address\n\t\t*\twe will use boundary function to move map to center\n\t\t*/\n\t\tmap.centerAndZoom(new BMap.Point(opts.center.longitude, opts.center.latitude), opts.zoom);  // 初始化地图,设置中心点坐标和地图级别\n\t\t//map.addControl(new BMap.MapTypeControl({mapTypes: [BMAP_NORMAL_MAP]}));   //添加地图类型控件\n\t\tmap.addControl(new BMap.NavigationControl());   //add navigate control\n\t\tmap.setCurrentCity(opts.city);          // 设置地图显示的城市 此项是必须设置的\n\t\tmap.disableScrollWheelZoom(true);\n\t\tcreateFullScreen(map, opts, element);\n\t\tcreateHeatMapButtons(map, opts, element, $translate);\n\t\treturn map;\n\t}\n\n\tfunction createMarker(marker, point){\n\t\tvar newMarker = new BMap.Marker(point);\n\t\tif (marker.icon) {\n\t\t\tvar icon = new BMap.Icon(marker.icon, new BMap.Size(marker.width, marker.height),{\n\t\t\t\t anchor: new BMap.Size(15, marker.height)\n\t\t\t});\n\t\t\tnewMarker = new BMap.Marker(point, { icon: icon });\n\t\t}\n\t\treturn newMarker;\n\t}\n\n\tfunction removeCoverage(map, opts){\n\t\tangular.forEach(opts.coveragePipes, function(row){\n\t\t\tmap.removeOverlay(row);\n\t\t});\n\t\topts.coveragePipes.length = 0;\n\t}\n\n\tfunction drawCoveragePipe(map, opts, status, marker, results){\n\t\t//var isAdd = status || true;\n\t\tvar color = \"red\";\n\t\tvar centerPoints = [];\n\t\tangular.forEach(results, function(row){\n\t\t\tvar junctions = [];\n\t\t\tangular.forEach(row.junctions, function(element){\n\t\t\t\tvar p = new BMap.Point(element.lng, element.lat);\n\t\t\t\tcenterPoints.push({lng: element.lng, lat: element.lat});\n\t\t\t\tjunctions.push(p);\n\t\t\t});\n\t\t\tvar pline = new BMap.Polyline(junctions, {strokeColor:color, strokeWeight:7, strokeOpacity:0.7});\n\t\t\topts.coveragePipes.push(pline);\n\t\t\tmap.addOverlay(pline);\n\t\t});\n\t\tmap.closeInfoWindow();\n\t\t/* move to center of highlight pipe\n\t\t*/\n\t\tmoveTargetToCenter(map, centerPoints);\n\t}\n\n\tfunction createNetworkMenu(map, opts, $translate, apiService, dialogService){\n\t\tvar menu = opts.menus;\n\t\tvar langMenu = {\n\t\t\tsearch: $translate.instant('site_network_toolbar_search'),\n\t\t\tpipes: $translate.instant('site_network_toolbar_pipes'),\n\t\t\tsensors: $translate.instant('site_network_toolbar_sensors'),\n\t\t\tstatus: $translate.instant('site_network_toolbar_status'),\n\t\t\tpumps: $translate.instant('site_network_toolbar_pumps'),\n\t\t\thydrant: $translate.instant('site_network_toolbar_hydrant'),\n\t\t\tpipeDetails: $translate.instant('site_network_toolbar_pipe_details'),\n\t\t\tcoverage: $translate.instant('site_network_toolbar_coverage'),\n\t\t\tcart: $translate.instant('site_network_data_plot_plotlist')\n\t\t};\n\t\tif($('#map_menu').length){\n\t\t\t$('#map_menu').remove();\n\t\t}\n\t\ttoggleNetworkMapButtons.prototype = new BMap.Control();\n\t\ttoggleNetworkMapButtons.prototype.initialize = function(map){\n\t\t\tvar div = document.createElement(\"div\");\n\t\t\tdiv.className = \"btn-group map-menu\";\n\t\t\tdiv.setAttribute(\"id\",\"map_menu\");\n\t\t\tdiv.setAttribute(\"role\",\"group\");\n\n\t\t\tif(menu.hasOwnProperty('search')){\n\t\t\t\tvar divSearch = document.createElement(\"div\");\n\n\t\t\t\tdivSearch.className = \"btn-group group-search\";\n\n\t\t\t\tvar searchToggle = document.createElement(\"button\");\n\t\t\t\tsearchToggle.className = \"btn-toggle btn-link\";\n\n\t\t\t\tvar searchIcon = document.createElement('i');\n\t\t\t\tsearchIcon.className = \"ti-search\";\n\n\t\t\t\tvar searchDropdown = document.createElement(\"div\");\n\t\t\t\tsearchDropdown.className = \"dropdown-search\";\n\n\t\t\t\tvar searchClear = document.createElement(\"a\");\n\t\t\t\tsearchClear.className = \"remove\";\n\n\t\t\t\tvar clearIcon = document.createElement('i');\n\t\t\t\tclearIcon.className = 'ti-close';\n\n\t\t\t\tvar searchInput = document.createElement(\"input\");\n\t\t\t\tsearchInput.setAttribute(\"type\",\"text\");\n\t\t\t\tsearchInput.setAttribute(\"placeholder\",\"search\");\n\n\t\t\t\tsearchClear.appendChild(clearIcon);\n\t\t\t\tsearchToggle.appendChild(searchIcon);\n\t\t\t\tsearchDropdown.appendChild(searchClear);\n\t\t\t\tsearchDropdown.appendChild(searchInput);\n\n\t\t\t\tsearchToggle.onclick = function(){\n\t\t\t\t\tvar elem = $(this),\n\t\t\t\t\t\tgroup = elem.parents('.group-search'),\n\t\t\t\t\t\tisActive = group.hasClass('on-search'),\n\t\t\t\t\t\tisKeyword = group.hasClass('on-keyword'),\n\t\t\t\t\t\tinput = group.find('input'),\n\t\t\t\t\t\tprevVal = (typeof input.data('value')!==\"undefined\") ? input.data('value') : \"\";\n\n\t\t\t\t\tremoveActiveClass([\"cart\",\"multi\"]);\n\t\t\t\t\tif(isActive){\n\t\t\t\t\t\tgroup.removeClass('on-search');\n\t\t\t\t\t}else{\n\t\t\t\t\t\tgroup.addClass('on-search');\n\t\t\t\t\t\tif(!isKeyword){\n\t\t\t\t\t\t\tinput.val('');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinput.val(prevVal).focus();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tsearchClear.onclick = function(e){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tvar elem = $(this),\n\t\t\t\t\t\tgroup = elem.parents('.group-search'),\n\t\t\t\t\t\tinput = group.find('input');\n\n\t\t\t\t\tgroup.removeClass('on-search').removeClass('on-keyword');\n\t\t\t\t\tinput.data('value','');\n\t\t\t\t\tsearchSensor(map, opts, \"\", dialogService, $translate);\n\t\t\t\t};\n\t\t\t\tsearchInput.onkeyup = function(e){\n\t\t\t\t\tvar elem = $(this),\n\t\t\t\t\t\tgroup = elem.parents('.group-search'),\n\t\t\t\t\t\tvalue = $.trim(elem.val()),\n\t\t\t\t\t\tprevVal = (typeof elem.data('value')!==\"undefined\") ? elem.data('value') : \"\";\n\n\t\t\t\t\tif(e.keyCode === 13 && value!==\"\" && value!==prevVal){\n\t\t\t\t\t \tgroup.addClass('on-keyword');\n\t\t\t\t\t \telem.data('value', value);\n\t\t\t\t\t \tsearchSensor(map, opts, value, dialogService, $translate);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tsearchInput.onblur = function(){\n\t\t\t\t\tvar elem = $(this),\n\t\t\t\t\t\tgroup = elem.parents('.group-search');\n\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tgroup.removeClass('on-search');\n\t\t\t\t\t},500);\n\t\t\t\t};\n\n\t\t\t\tdivSearch.appendChild(searchToggle);\n\t\t\t\tdivSearch.appendChild(searchDropdown);\n\t\t\t\tdiv.appendChild(divSearch);\n\t\t\t}\n\n\t\t\tif(menu.hasOwnProperty('cart')){\n\t\t\t\tvar divCartGroup = document.createElement(\"div\");\n\t\t\t\tdivCartGroup.className = \"btn-group cart-group\";\n\n\t\t\t\tvar cartMenuButton = document.createElement(\"button\");\n\t\t\t\tcartMenuButton.className = \"btn btn-secondary btn-outline btn-sm\";\n\t\t\t\tcartMenuButton.setAttribute(\"type\",\"button\");\n\t\t\t\tcartMenuButton.innerHTML = langMenu.cart;\n\n\t\t\t\tvar badgeDiv = document.createElement(\"span\");\n\t\t\t\tbadgeDiv.className = \"badge badge-primary m-l-5\";\n\t\t\t\tbadgeDiv.setAttribute(\"id\",\"count_badge\");\n\t\t\t\tbadgeDiv.innerHTML = \"0\";\n\n\t\t\t\tcartMenuButton.appendChild(badgeDiv);\n\t\t\t\tdivCartGroup.appendChild(cartMenuButton);\n\n\t\t\t\tcartMenuButton.onclick = function(e){\n\t\t\t\t\tvar elem = $(e.target),\n\t\t\t\t\t\tpr = elem.parents('.cart-group'),\n\t\t\t\t\t\tisActive = elem.hasClass('active'),\n\t\t\t\t\t\tclassActive = \"active\";\n\n\t\t\t\t\tremoveActiveClass([\"search\",\"multi\"]);\n\t\t\t\t\tif(isActive){\n\t\t\t\t\t\telem.removeClass(classActive);\n\t\t\t\t\t\tpr.removeClass(classActive)\n\t\t\t\t\t}else{\n\t\t\t\t\t\telem.addClass(classActive);\n\t\t\t\t\t\tpr.addClass(classActive);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tvar cartDiv = document.createElement(\"div\");\n\t\t\t\tcartDiv.className = \"cart-list card scale-up\";\n\n\t\t\t\tvar cartHeader = document.createElement(\"div\");\n\t\t\t\tcartHeader.className = \"card-header\";\n\n\t\t\t\tvar cartHeaderTitle = document.createElement(\"h4\");\n\t\t\t\tcartHeaderTitle.className = \"m-b-0\";\n\t\t\t\tcartHeaderTitle.innerHTML = $translate.instant('site_network_data_plot_plotlist');\n\n\t\t\t\tvar cartBody = document.createElement(\"div\");\n\t\t\t\tcartBody.className = \"card-body\";\n\t\t\t\tcartBody.setAttribute(\"id\",\"cart_options_list\");\n\n\t\t\t\tcartHeader.appendChild(cartHeaderTitle);\n\t\t\t\tcartDiv.appendChild(cartHeader);\n\t\t\t\tcartDiv.appendChild(cartBody);\n\t\t\t\tdivCartGroup.appendChild(cartDiv);\n\t\t\t\tdiv.appendChild(divCartGroup);\n\t\t\t}\n\n\t\t\tvar divGroup = document.createElement(\"div\");\n\t\t\tdivGroup.className = \"btn-group multi-group\";\n\t\t\tvar divButtonTrigger = document.createElement(\"div\");\n\t\t\tdivButtonTrigger.className = \"btn btn-secondary btn-outline btn-sm btn-trigger\";\n\t\t\tvar divButtonTriggerIcon = document.createElement(\"i\");\n\t\t\tdivButtonTriggerIcon.className = \"ti-menu\";\n\t\t\tvar divSubGroup = document.createElement(\"div\");\n\t\t\tdivSubGroup.className = \"sub-group\";\n\n\n\t\t\tdivButtonTrigger.appendChild(divButtonTriggerIcon);\n\t\t\tdivGroup.appendChild(divButtonTrigger);\n\n\t\t\tdivButtonTrigger.onclick = function(){\n\t\t\t\tvar elem = $(this),\n\t\t\t\t\tgroup = elem.parents('.multi-group'),\n\t\t\t\t\tisActive = group.hasClass('active'),\n\t\t\t\t\tclassActive = \"active\";\n\n\t\t\t\tremoveActiveClass([\"cart\",\"search\"]);\n\t\t\t\tif(isActive){\n\t\t\t\t\tgroup.removeClass(classActive);\n\t\t\t\t}else{\n\t\t\t\t\tgroup.addClass(classActive);\n\t\t\t\t}\n\t\t\t};\n\n\n\t\t\tangular.forEach(menu, function(value, key) {\n\t\t\t\tvar divMenuGroup = document.createElement(\"button\");\n\t\t\t\tvar menuButton = document.createElement(\"button\");\n\t\t\t\tvar divDropdown = document.createElement(\"div\");\n\n\n\n\t\t\t\tif(key!==\"coverage\" && key!==\"hydrant\" && key!==\"cart\" && key!==\"pipeDetails\" && key!==\"search\"){\n\t\t\t\t\tdivMenuGroup = document.createElement(\"div\");\n\t\t\t\t\tdivMenuGroup.className = \"btn-group\";\n\t\t\t\t\tdivMenuGroup.setAttribute(\"role\",\"group\");\n\n\t\t\t\t\tmenuButton = document.createElement(\"button\");\n\t\t\t\t\tmenuButton.className = \"btn btn-secondary btn-outline btn-sm\";\n\t\t\t\t\tmenuButton.setAttribute(\"type\",\"button\");\n\t\t\t\t\tmenuButton.setAttribute(\"data-toggle\",\"dropdown\");\n\t\t\t\t\tmenuButton.innerHTML = langMenu[key];\n\n\t\t\t\t\tdivDropdown = document.createElement(\"div\");\n\t\t\t\t\tdivDropdown.className = \"dropdown-menu\";\n\n\t\t\t\t\tdivMenuGroup.appendChild(menuButton);\n\n\t\t\t\t\tvar divAll = document.createElement(\"a\");\n\t\t\t\t\tdivAll.setAttribute(\"class\",\"dropdown-item active\");\n\t\t\t\t\tdivAll.setAttribute(\"href\",\"#\");\n\t\t\t\t\tdivAll.setAttribute(\"data-value\",\"all\");\n\t\t\t\t\tdivAll.setAttribute(\"data-type\",key);\n\t\t\t\t\tdivAll.innerHTML = $translate.instant('site_network_toolbar_menu_all')+\" \"+langMenu[key];\n\n\t\t\t\t\tdivDropdown.appendChild(divAll);\n\n\t\t\t\t\tdivAll.onclick = function(e){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tvar thisElem = $(e.target),\n\t\t\t\t\t\t\ttype = thisElem.data('type'),\n\t\t\t\t\t\t\tvalue = \"all\",\n\t\t\t\t\t\t\tisActive = !thisElem.hasClass('active');\n\t\t\t\t\t\tthisElem.toggleClass('active');\n\t\t\t\t\t\tif(isActive){\n\t\t\t\t\t\t\tthisElem.siblings().addClass('active');\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthisElem.siblings().removeClass('active');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoggleUpdateOverlay(type, map, isActive, value, opts);\n\t\t\t\t\t};\n\n\t\t\t\t\tangular.forEach(value.results, function(row){\n\t\t\t\t\t\tvar valName = row;\n\t\t\t\t\t\tvar divSub = document.createElement(\"a\");\n\t\t\t\t\t\tdivSub.setAttribute(\"class\",\"dropdown-item active\");\n\t\t\t\t\t\tdivSub.setAttribute(\"href\",\"#\");\n\t\t\t\t\t\tdivSub.setAttribute(\"data-value\",valName);\n\t\t\t\t\t\tdivSub.setAttribute(\"data-type\",key);\n\t\t\t\t\t\tdivSub.innerHTML = valName;\n\n\t\t\t\t\t\tdivSub.onclick = function(e){\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tvar thisElem = $(e.target);\n\t\t\t\t\t\t\tthisElem.toggleClass('active');\n\t\t\t\t\t\t\tvar group = thisElem.parent('.dropdown-menu'),\n\t\t\t\t\t\t\t\titems = group.find('.dropdown-item'),\n\t\t\t\t\t\t\t\titemNonSelect = items.filter(\":not(.active):not([data-value='all'])\"),\n\t\t\t\t\t\t\t\titemAll = items.filter('[data-value=\"all\"]'),\n\t\t\t\t\t\t\t\tvalue = thisElem.data('value'),\n\t\t\t\t\t\t\t\ttype = thisElem.data('type'),\n\t\t\t\t\t\t\t\tisActive = thisElem.hasClass('active');\n\n\t\t\t\t\t\t\tif(itemNonSelect.length<=0){\n\t\t\t\t\t\t\t\titemAll.addClass('active');\n\t\t\t\t\t\t\t}else if(itemNonSelect.length<=parseInt(items.length-1)){\n\t\t\t\t\t\t\t\titemAll.removeClass('active');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttoggleUpdateOverlay(type, map, isActive, value, opts);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdivDropdown.appendChild(divSub);\n\t\t\t\t\t});\n\t\t\t\t\tdivMenuGroup.appendChild(divDropdown);\n\t\t\t\t\tdivSubGroup.appendChild(divMenuGroup);\n\t\t\t\t}else if(key===\"coverage\"){\n\t\t\t\t\tdivMenuGroup.className = \"btn btn-secondary btn-outline btn-sm\";\n\t\t\t\t\tdivMenuGroup.innerHTML = langMenu[key];\n\t\t\t\t\tdivMenuGroup.onclick = function(){\n\t\t\t\t\t\tremoveCoverage(map, opts);\n\t\t\t\t\t};\n\t\t\t\t\tdivSubGroup.appendChild(divMenuGroup);\n\t\t\t\t}else if(key===\"hydrant\" || key===\"pipeDetails\"){\n\t\t\t\t\tdivMenuGroup = document.createElement(\"div\");\n\t\t\t\t\tdivMenuGroup.className = \"btn-group\";\n\t\t\t\t\tdivMenuGroup.setAttribute(\"role\",\"group\");\n\n\t\t\t\t\tmenuButton = document.createElement(\"button\");\n\t\t\t\t\tmenuButton.className = \"btn btn-secondary btn-outline btn-sm\";\n\t\t\t\t\tmenuButton.setAttribute(\"type\",\"button\");\n\t\t\t\t\tmenuButton.setAttribute(\"data-toggle\",\"dropdown\");\n\t\t\t\t\tmenuButton.innerHTML = langMenu[key];\n\n\t\t\t\t\tdivDropdown = document.createElement(\"div\");\n\t\t\t\t\tdivDropdown.className = \"dropdown-menu\";\n\n\t\t\t\t\tdivMenuGroup.appendChild(menuButton);\n\n\t\t\t\t\tvar divSearch = document.createElement(\"a\");\n\t\t\t\t\tdivSearch.setAttribute(\"class\",\"dropdown-item\");\n\t\t\t\t\tdivSearch.setAttribute(\"href\",\"#\");\n\t\t\t\t\tdivSearch.setAttribute(\"data-value\",\"all\");\n\t\t\t\t\tdivSearch.setAttribute(\"data-type\",key);\n\t\t\t\t\tdivSearch.innerHTML = $translate.instant('site_network_toolbar_menu_search');\n\t\t\t\t\tdivDropdown.appendChild(divSearch);\n\n\t\t\t\t\tdivSearch.onclick = function(e){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif(key===\"hydrant\"){\n\t\t\t\t\t\t\tgetHydrantData(map, opts, apiService, dialogService, $translate);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tgetPipeDetailsData(map, opts, apiService, dialogService, $translate);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tvar divClear = document.createElement(\"a\");\n\t\t\t\t\tdivClear.setAttribute(\"class\",\"dropdown-item\");\n\t\t\t\t\tdivClear.setAttribute(\"href\",\"#\");\n\t\t\t\t\tdivClear.setAttribute(\"data-value\",\"clear\");\n\t\t\t\t\tdivClear.setAttribute(\"data-type\",key);\n\t\t\t\t\tdivClear.innerHTML = $translate.instant('site_network_toolbar_menu_remove');\n\t\t\t\t\tdivDropdown.appendChild(divClear);\n\n\t\t\t\t\tdivClear.onclick = function(e){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tif(key===\"hydrant\"){\n\t\t\t\t\t\t\tclearHydrant(map, opts);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tclearPipeDetails(map, opts);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t};\n\t\t\t\t\tdivMenuGroup.appendChild(divDropdown);\n\t\t\t\t\tdivSubGroup.appendChild(divMenuGroup);\n\t\t\t\t}\n\n\t\t\t\t//END - create multi group - without search\n\t\t\t});\n\n\t\t\tdivGroup.appendChild(divSubGroup);\n\t\t\tdiv.appendChild(divGroup);\n\n\t\t\t// 添加DOM元素到地图中\n\t\t\tmap.getContainer().appendChild(div);\n\t\t\t// 将DOM元素返回\n\t\t\treturn div;\n\t\t};\n\t\t// 创建控件\n\t\tvar myCtrl = new toggleNetworkMapButtons();\n\t\t// 添加到地图当中\n\t\tmap.addControl(myCtrl);\n\t}\n\n\t/* remove main menu active class\n\t*/\n\tfunction removeActiveClass(arr){\n\t\tvar menu = $('#map_menu'),\n\t\t\tlist = {\n\t\t\t\t\"cart\":\".cart-group\",\n\t\t\t\t\"search\":\".group-search\",\n\t\t\t\t\"multi\":\".multi-group\"\n\t\t\t},\n\t\t\tclassActive = \"active\";\n\n\t\tangular.forEach(arr, function(value){\n\t\t\tvar opt = list[value];\n\t\t\tif(value===\"search\" || value===\"multi\"){\n\t\t\t\tif(menu.find(opt).length){\n\t\t\t\t\t\tmenu.find(opt).removeClass(classActive);\n\t\t\t\t}\n\t\t\t}else if(value===\"cart\"){\n\t\t\t\tif(menu.find(opt).length){\n\t\t\t\t\tmenu.find(opt).removeClass(classActive).find('>button').removeClass(classActive);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/* search sensor data - device_ref, name, address\n\t*/\n\tfunction searchSensor(map, opts, keyword, dialogService, $translate){\n\t\tvar userValue = keyword;\n\t\tvar fields = [\"device_ref\",\"name\",\"geo_address\"];\n\t\tvar matchArr = [];\n\t\tvar cloneInstance = opts.markerInstance;\n\t\tvar centerpoint = [];\n\t\topts.onSearch = true;\n\n\t\tangular.forEach(opts.markers, function(element, index){\n\t\t\tfor(var key in element){\n\t\t\t\tif($.inArray(key, fields)!==-1 && element[key].toLowerCase().indexOf(userValue.toLowerCase()) > -1){\n\t\t\t\t\tvar res = element;\n\t\t\t\t\tres.position = index;\n\t\t\t\t\tmatchArr.push(res);\n\t\t\t\t\tcenterpoint.push({\n\t\t\t\t\t\tlat: res.geo_latlng.split(',')[0],\n\t\t\t\t\t\tlng: res.geo_latlng.split(',')[1]\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tangular.forEach(cloneInstance, function(element){\n\t\t\telement.hide();\n\t\t});\n\t\t//上海市浦东新区琼阁路\n\n\t\tangular.forEach(matchArr, function(element){\n\t\t\tvar selectedInstance = cloneInstance[element.position];\n\t\t\tselectedInstance.show();\n\t\t});\n\n\t\t//if matched = moved to center\n\t\tif(matchArr.length){\n\t\t\tmoveTargetToCenter(map, centerpoint);\n\t\t}\n\n\t\tdialogService.alert(null, {\n\t\t\ttitle: $translate.instant('site_network_search_result_title'),\n\t\t\tcontent: $translate.instant('site_network_search_result_content', {num: matchArr.length}),\n\t\t\tok: $translate.instant('site_login_error_noted'),\n\t\t\tclickOutsideToClose: false,\n\t\t\tcallback: function(){\n\t\t\t\topts.onSearch = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t/* move to map center\n\t*/\n\tfunction moveTargetToCenter(map, res){\n\t\t/* move to center of highlight pipe\n\t\t*/\n\t\tvar points = [];\n\t\tres.forEach(function (loc) {\n\t\t\tpoints.push(new BMap.Point(loc.lng, loc.lat));\n\t\t});\n\t\tmap.setViewport(points);\n\t}\n\n\n\t/* get hydrant marker\n\t*\n\t*/\n\tfunction getHydrantData(map, opts, apiService, dialogService, $translate){\n\t\tvar mapcenter = map.getCenter();\n\t\tvar mapZoom = map.getZoom();\n\t\tvar minZoom = 13;\n\t\tif(mapZoom<minZoom){\n\t\t\tmap.setZoom(minZoom);\n\t\t\tmapcenter = map.getCenter();\n\t\t}\n\t\tapiService.networkHydrantApi(mapcenter.lat+\",\"+mapcenter.lng).then(function(response){\n\t\t\topts.hydrant.length = 0;\n\t\t\tif(response.data.length){\n\t\t\t\tangular.forEach(response.data, function(row){\n\t\t\t\t\tvar p = row.location[0];\n\t\t\t\t\tvar location = {\n\t\t\t\t\t\tlongitude: p.longitude,\n\t\t\t\t\t\tlatitude: p.latitude\n\t\t\t\t\t};\n\t\t\t\t\topts.hydrant.push(location);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdialogService.alert(null,{title: $translate.instant('site_network_toolbar_hydrant'), content: $translate.instant('site_network_hydrant_no_found'), ok: $translate.instant('site_login_error_noted')});\n\t\t\t}\n\t\t\tdrawHydrant(map, opts);\n\t\t});\n\t}\n\n\t/* get pipe details marker\n\t*\n\t*/\n\tfunction getPipeDetailsData(map, opts, apiService, dialogService, $translate){\n\t\tvar mapcenter = map.getCenter();\n\t\tvar mapZoom = map.getZoom();\n\t\tvar minZoom = 13;\n\t\tif(mapZoom<minZoom){\n\t\t\tmap.setZoom(minZoom);\n\t\t\tmapcenter = map.getCenter();\n\t\t}\n\t\tapiService.networkPipeDetailsApi(mapcenter.lat+\",\"+mapcenter.lng).then(function(response){\n\t\t\topts.pipeDetails.length = 0;\n\t\t\tif(response.data.length){\n\t\t\t\tvar results = {};\n\t\t\t\tangular.forEach(response.data, function(row){\n\t\t\t\t\tvar junctions = row.junctions;\n\t\t\t\t\tvar weight = parseInt(row.optional.diameter)/250;\n\t\t\t\t\tresults = {};\n\t\t\t\t\tresults.weight = weight;\n\t\t\t\t\tresults.location = [];\n\t\t\t\t\tangular.forEach(junctions, function(element){\n\t\t\t\t\t\tresults.location.push({\n\t\t\t\t\t\t\tlatitude: element.lat,\n\t\t\t\t\t\t\tlongitude: element.lng,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t\topts.pipeDetails.push(results);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tdialogService.alert(null,{title: $translate.instant('site_network_toolbar_pipe_details'), content: $translate.instant('site_network_pipe_details_no_found'), ok: $translate.instant('site_login_error_noted')});\n\t\t\t}\n\t\t\tdrawPipeDetails(map, opts);\n\t\t});\n\t}\n\n\t/* toggle update overlay\n\t*\n\t*/\n\tfunction toggleUpdateOverlay(type, map, status, value, opts){\n\t\tif(type===\"sensors\"){\n\t\t\tupdateSensorOverlay(map, status, value, opts);\n\t\t}else if(type===\"pipes\"){\n\t\t\tupdatePipeOverlay(map, status, value, opts);\n\t\t}else if(type===\"status\"){\n\t\t\tupdateStatusOverlay(map, status, value, opts);\n\t\t}else if(type===\"pumps\"){\n\t\t\tupdatePumpOverlay(map, status, value, opts);\n\t\t}\n\t}\n\n\t/* update pump marker overlap\n\t*\n\t*/\n\tfunction updatePumpOverlay(map, status, value, opts){\n\t\tvar pumpInstance = opts.pumpInstance;\n\t\tif(!status && value===\"all\"){ //all & off\n\t\t\tangular.forEach(opts.pumps, function(element, i){\n\t\t\t\tmap.removeOverlay(pumpInstance[i]);\n\t\t\t});\n\t\t}else if(status && value===\"all\"){ //all & on\n\t\t\tangular.forEach(opts.pumps, function(element, i){\n\t\t\t\tmap.addOverlay(pumpInstance[i]);\n\t\t\t});\n\t\t}else if(value!==\"all\"){\n\t\t\tangular.forEach(opts.pumps, function(element, i){\n\t\t\t\tif(element.name===value.toString()){\n\t\t\t\t\tif(status){\n\t\t\t\t\t\tmap.addOverlay(pumpInstance[i]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tmap.removeOverlay(pumpInstance[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/* update status overlap\n\t*\n\t*/\n\tfunction updateStatusOverlay(map, status, value, opts){\n\t\tvar markerInstance = opts.markerInstance;\n\t\tif(!status && value===\"all\"){ //all & off\n\t\t\tangular.forEach(opts.markers, function(element, i){\n\t\t\t\tmap.removeOverlay(markerInstance[i]);\n\t\t\t});\n\t\t}else if(status && value===\"all\"){ //all & on\n\t\t\tangular.forEach(opts.markers, function(element, i){\n\t\t\t\tmap.addOverlay(markerInstance[i]);\n\t\t\t});\n\t\t}else if(value!==\"all\"){\n\t\t\tangular.forEach(opts.markers, function(element, i){\n\t\t\t\tif(element.status===value){\n\t\t\t\t\tif(status){\n\t\t\t\t\t\tmap.addOverlay(markerInstance[i]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tmap.removeOverlay(markerInstance[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/* update sensor overlap\n\t*\n\t*/\n\tfunction updateSensorOverlay(map, status, value, opts){\n\t\tvar markerInstance = opts.markerInstance;\n\t\tif(!status && value===\"all\"){ //all & off\n\t\t\tangular.forEach(opts.markers, function(element, i){\n\t\t\t\tmap.removeOverlay(markerInstance[i]);\n\t\t\t});\n\t\t}else if(status && value===\"all\"){ //all & on\n\t\t\tangular.forEach(opts.markers, function(element, i){\n\t\t\t\tmap.addOverlay(markerInstance[i]);\n\t\t\t});\n\t\t}else if(value!==\"all\"){\n\t\t\tangular.forEach(opts.markers, function(element, i){\n\t\t\t\tif(element.tag.subzone===value){\n\t\t\t\t\tif(status){\n\t\t\t\t\t\tmap.addOverlay(markerInstance[i]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tmap.removeOverlay(markerInstance[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/* update sensor overlap\n\t*\n\t*/\n\tfunction updatePipeOverlay(map, status, value, opts){\n\t\tvar pipeInstance = opts.pipeInstance;\n\t\tif(!status && value===\"all\"){ //all & off\n\t\t\tangular.forEach(opts.pipes, function(element, i){\n\t\t\t\tmap.removeOverlay(pipeInstance[i]);\n\t\t\t});\n\t\t}else if(status && value===\"all\"){ //all & on\n\t\t\tangular.forEach(opts.pipes, function(element, i){\n\t\t\t\tmap.addOverlay(pipeInstance[i]);\n\t\t\t});\n\t\t}else if(value!==\"all\"){\n\t\t\tangular.forEach(opts.pipes, function(element, i){\n\t\t\t\tif(element.subzone===value){\n\t\t\t\t\tif(status){\n\t\t\t\t\t\tmap.addOverlay(pipeInstance[i]);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tmap.removeOverlay(pipeInstance[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/* clear hydrant\n\t*\n\t*/\n\tfunction clearHydrant(map, opts){\n\t\tif(opts.hydrantInstance.length){\n\t\t\tangular.forEach(opts.hydrantInstance, function(element/*, i*/){\n\t\t\t\tmap.removeOverlay(element);\n\t\t\t});\n\t\t}\n\t\topts.hydrantInstance.length = 0;\n\t}\n\n\t/* clear pipe details\n\t*\n\t*/\n\tfunction clearPipeDetails(map, opts){\n\t\tif(opts.pipeDetailsInstance.length){\n\t\t\tangular.forEach(opts.pipeDetailsInstance, function(element/*, i*/){\n\t\t\t\tmap.removeOverlay(element);\n\t\t\t});\n\t\t}\n\t\topts.pipeDetailsInstance.length = 0;\n\t}\n\n\t/* draw hydrant\n\t*\n\t*/\n\tfunction drawHydrant(map, opts){\n\t\tvar centerPoints = [];\n\t\tvar existHydrant = (opts.hasOwnProperty('hydrantInstance') && opts.hydrantInstance.length);\n\t\tif(existHydrant){\n\t\t\t//clearHydrant(map, opts);\n\t\t}\n\t\tif(!opts.hasOwnProperty('hydrantInstance')){\n\t\t\topts.hydrantInstance = [];\n\t\t}\n\t\t//opts.hydrantInstance = [];\n\t\topts.hydrant.forEach(function (row) {\n\t\t\tvar marker = {\n\t\t\t\ticon: 'assets/images/map/marker_hydrant.png',\n\t\t\t\twidth: 15,\n\t\t\t\theight: 15,\n\t\t\t\ttitle: '',\n\t\t\t\tcontent: ''\n\t\t\t};\n\t\t\tvar markerItem = createMarker(marker, new BMap.Point(row.longitude, row.latitude));\n\t\t\t//markerItem.setTop(true);\n\t\t\tcenterPoints.push({lng: row.longitude, lat: row.latitude});\n\t\t\topts.hydrantInstance.push(markerItem);\n\t\t\t// add marker to the map\n\t\t\tmap.addOverlay(markerItem);\n\t\t\tmarkerItem.setLabel(\"\");\n\t\t});\n\t\t/* move to center of highlight pipe\n\t\t*/\n\t\tmoveTargetToCenter(map, centerPoints);\n\t}\n\n\t/* draw pipe details\n\t*\n\t*/\n\tfunction drawPipeDetails(map, opts){\n\t\tvar centerPoints = [];\n\t\tvar existInstance = (opts.hasOwnProperty('pipeDetailsInstance') && opts.pipeDetailsInstance.length);\n\t\tif(existInstance){\n\t\t\t//clearPipeDetails(map, opts);\n\t\t}\n\t\tif(!opts.hasOwnProperty('pipeDetailsInstance')){\n\t\t\topts.pipeDetailsInstance = [];\n\t\t}\n\t\t//opts.pipeDetailsInstance = [];\n\t\topts.pipeDetails.forEach(function (row) {\n\t\t\tvar pipeArr = [];\n\t\t\trow.location.forEach(function (loc) {\n\t\t\t\tvar pt = new BMap.Point(loc.longitude, loc.latitude);\n\t\t\t\tpipeArr.push(pt);\n\t\t\t\tcenterPoints.push({lng: loc.longitude, lat: loc.latitude});\n\t\t\t});\n\t\t\tvar pipeOverlay = new BMap.Polyline(pipeArr, {strokeColor: \"#000000\", strokeWeight: row.weight, strokeOpacity:1});\n\t\t\topts.pipeDetailsInstance.push(pipeOverlay);\n\t\t\tmap.addOverlay(pipeOverlay);\n\t\t});\n\t\t/* move to center of highlight pipe\n\t\t*/\n\t\tmoveTargetToCenter(map, centerPoints);\n\t}\n\n\t/* draw pumps\n\t*\n\t*/\n\tfunction drawPumps(map, opts){\n\t\topts.pumpInstance = [];\n\t\topts.pumps.forEach(function (row) {\n\t\t\tvar marker = {\n\t\t\t\ticon: 'assets/images/map/marker_pump.png',\n\t\t\t\twidth: 38,\n\t\t\t\theight: 46,\n\t\t\t\ttitle: '',\n\t\t\t\tcontent: ''\n\t\t\t};\n\t\t\tvar markerItem = createMarker(marker, new BMap.Point(row.longitude, row.latitude));\n\t\t\tmarkerItem.setTop(true);\n\t\t\topts.pumpInstance.push(markerItem);\n\t\t\t// add marker to the map\n\t\t\tmap.addOverlay(markerItem);\n\t\t\tmarkerItem.setLabel(\"\");\n\t\t});\n\t}\n\n\n\t/* draw a pipe area line\n\t*\n\t*/\n\tfunction drawPipeArea(map, opts){\n\t\topts.pipeInstance = [];\n\t\topts.pipes.forEach(function (row) {\n\t\t\tvar pipeArr = [];\n\t\t\trow.location.forEach(function (loc) {\n\t\t\t\tvar pt = new BMap.Point(loc.longitude, loc.latitude);\n\t\t\t\tpipeArr.push(pt);\n\n\t\t\t});\n\t\t\tvar pipeOverlay = new BMap.Polyline(pipeArr, {strokeColor: row.color, strokeWeight: row.weight, strokeOpacity:1});\n\t\t\topts.pipeInstance.push(pipeOverlay);\n\t\t\tmap.addOverlay(pipeOverlay);\n\n\t\t\t/* info window\n\t\t\t*/\n\t\t\tif ((!row.title && !row.content) || opts.mapType===\"networkmapData\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//info window msg\n\t\t\tvar msg = '<p>' + (row.title || '') + '</p><p>' + (row.content || '') + '</p>';\n\t\t\tvar infoWindowItem = new BMap.InfoWindow(msg, {\n\t\t\t\tenableMessage: true,\n\t\t\t\twidth : 350\n\t\t\t});\n\n\t\t\tpipeOverlay.addEventListener('click', function(e){\n\t\t\t\tmap.openInfoWindow(infoWindowItem, new BMap.Point(e.point.lng, e.point.lat));\n\t\t\t});\n\t\t});\n\t}\n\n\t/* add to cart animation\n\t*/\n\tvar cart_timer = null;\n\tfunction addToCartAnimation(elem){\n\t\tvar cart = $('.cart-group>button');\n\t\tvar imgtodrag = elem.find('img');\n\t\tif (imgtodrag) {\n\t\t\tvar imgclone = imgtodrag.clone()\n\t\t\t.offset({\n\t\t\t\ttop: imgtodrag.offset().top,\n\t\t\t\tleft: imgtodrag.offset().left\n\t\t\t})\n\t\t\t.css({\n\t\t\t\t'opacity': '0.5',\n\t\t\t\t'position': 'absolute',\n\t\t\t\t'height': '150px',\n\t\t\t\t'width': '150px',\n\t\t\t\t'z-index': '100'\n\t\t\t})\n\t\t\t.appendTo($('body'))\n\t\t\t.animate({\n\t\t\t\t'top': cart.offset().top + 10,\n\t\t\t\t'left': cart.offset().left + 10,\n\t\t\t\t'width': 75,\n\t\t\t\t'height': 75\n\t\t\t}, 1000/*, 'easeInOutExpo'*/);\n\n\t\t\tclearTimeout(cart_timer);\n\t\t\tcart.removeClass('bounce');\n\t\t\tcart_timer = setTimeout(function () {\n\t\t\t\tcart.addClass('bounce');\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tcart.removeClass('bounce');\n\t\t\t\t},2000);\n\t\t\t}, 1500);\n\n\t\t\timgclone.animate({\n\t\t\t\t'width': 0,\n\t\t\t\t'height': 0\n\t\t\t}, function () {\n\t\t\t\t$(this).detach();\n\t\t\t});\n\t\t}\n\t}\n\n\t/* draw a project area line\n\t*\n\t*/\n\tfunction boundaryArea(map, opts){\n\t\tvar points = [];\n\t\tvar num = Math.ceil(opts.boundary.length/2);\n\t\topts.boundary.forEach(function (loc) {\n\t\t\tpoints.push(new BMap.Point(loc.longitude, loc.latitude));\n\t\t});\n\t\tvar polygon = new BMap.Polygon(points, {strokeColor:\"blue\", strokeWeight:3, strokeOpacity:1, fillColor:\"\"});\n\t\tif(opts.boundary.length){\n\t\t\tmap.centerAndZoom(new BMap.Point(opts.boundary[num].longitude, opts.boundary[num].latitude), opts.zoom);\n\t\t}\n\t\tmap.addOverlay(polygon);\n\t\tmap.setViewport(points);\n\t\tmoveMapToCenter(map, opts);\n\t}\n\n\tfunction drawHeatMap(map, opts){\n\t\tif(!isSupportCanvas() || typeof map===\"undefined\"){\n\t\t\treturn false;\n\t\t}\n\t\tmap.removeEventListener(\"tilesloaded\", drawHeatMap); //remove listener\n\t\tvar radius = 150;\n\t\tvar max = 90;\n\t\theatmapOverlay = new BMapLib.HeatmapOverlay({\"radius\":radius});\n\t\tmap.addOverlay(heatmapOverlay);\n\t\theatmapOverlay.setDataSet({\n\t\t\tdata:opts.heatMap,\n\t\t\tmax:max\n\t\t});\n\t\theatmapOverlay.show();\n\t}\n\n\tfunction isSupportCanvas(){\n\t\tvar elem = document.createElement('canvas');\n\t\treturn !!(elem.getContext && elem.getContext('2d'));\n\t}\n\tfunction validateUniquMarker(oldArr, newArr){\n\t\tvar isUnique = true;\n\t\tif(oldArr.length){\n\t\t\tangular.forEach(oldArr, function(value){\n\t\t\t\tif(angular.isDefined(value.datapoint.pressure) && value.datapoint.pressure._id===newArr.datapoint.pressure._id){\n\t\t\t\t\tisUnique = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn isUnique;\n\t}\n\tfunction redrawMarkers(map, $translate, previousMarkers, opts, $scope, modalService, apiService, dialogService){\n\t\tvar points = [];\n\t\tif(opts.hasOwnProperty('onSearch') && opts.onSearch){\n\t\t\treturn;\n\t\t}\n\t\tpreviousMarkers.forEach(function (item) {\n\t\t\tvar marker = item.marker;\n\t\t\tvar listener = item.listener;\n\n\t\t\tmarker.removeEventListener('click', listener);\n\t\t\tmap.removeOverlay(marker);\n\t\t});\n\t\tpreviousMarkers.length = 0;\n\t\tif (!opts.markers) {\n\t\t\treturn;\n\t\t}\n\t\tif(!opts.hasOwnProperty('markerInstance')){\n\t\t\topts.markerInstance = [];\n\t\t}else{\n\t\t\topts.markerInstance.length = 0;\n\t\t}\n\t\topts.markers.forEach(function (marker) {\n\t\t\tvar markerItem = createMarker(marker, new BMap.Point(marker.longitude, marker.latitude));\n\n\t\t\tvar infoButton = \"<div class='btn-group'>\";\n\t\t\t\tinfoButton += \"<button type='button' class='btn btn-secondary' data-toggle='tooltip' data-trigger='hover' title='\"+$translate.instant('site_location_button_viewinfo')+\"' id='baidu_marker_info'><i class='ti-info-alt'></i></button>\";\n\t\t\t\tinfoButton += \"<button type='button' class='btn btn-secondary' data-toggle='tooltip' data-trigger='hover' title='\"+$translate.instant('site_location_button_viewdata')+\"' id='baidu_marker_data'><i class='ti-stats-up'></i></button>\";\n\t\t\t\tinfoButton += \"</div>\";\n\t\t\tpoints.push(new BMap.Point(marker.longitude, marker.latitude));\n\t\t\topts.markerInstance.push(markerItem);\n\t\t\t// add marker to the map\n\t\t\tmap.addOverlay(markerItem);\n\t\t\tmarkerItem.setLabel(\"\");\n\t\t\t// append marker\n\t\t\tvar previousMarker = { marker: markerItem, listener: null };\n\t\t\tpreviousMarkers.push(previousMarker);\n\t\t\tif (!marker.title && !marker.content) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//info window msg\n\t\t\tvar msg = '<p>' + (marker.title || '') + '</p><p>' + (marker.content || '') + '</p>';\n\t\t\tif(opts.mapType===\"map\"){\n\t\t\t\tmsg += infoButton;\n\t\t\t}else if(opts.mapType===\"networkAnalysisMap\"){\n\t\t\t\tvar coverageButton = \"<button type='button' class='btn btn-secondary' data-toggle='tooltip' data-trigger='hover' title='\"+$translate.instant('site_network_map_button_coverage')+\"' id='network_coverage_info'><i class='ti-target'></i></button>\";\n\t\t\t\tmsg = '<p>' + (marker.title || '') + '</p>'+coverageButton+'<p>' + (marker.content || '') + '</p>';\n\t\t\t}else if(opts.mapType===\"networkmapData\"){\n\t\t\t\tvar cartButton = \"<button type='button' class='btn btn-secondary' data-trigger='hover' id='network_data_addtocart'><i class='ti-plus'></i> \"+$translate.instant('site_network_data_plot_addtoplot')+\"</button>\";\n\t\t\t\tmsg = '<p>' + (marker.title || '') + '</p>'+cartButton+'<p>' + (marker.content || '') + '</p>';\n\t\t\t}\n\n\t\t\tvar infoWindowItem = new BMap.InfoWindow(msg, {\n\t\t\t\tenableMessage: !!marker.enableMessage\n\t\t\t});\n\t\t\t//marker binding\n\t\t\tpreviousMarker.listener = function () {\n\t\t\t\tthis.openInfoWindow(infoWindowItem);\n\t\t\t\tvar elData = document.getElementById(\"baidu_marker_data\");\n\t\t\t\tvar elInfo = document.getElementById(\"baidu_marker_info\");\n\t\t\t\tvar elCoverage = document.getElementById(\"network_coverage_info\");\n\t\t\t\tvar elCart = document.getElementById(\"network_data_addtocart\");\n\t\t\t\tif(angular.isDefined(modalService) && modalService!==null){\n\t\t\t\t\telData.addEventListener(\"click\", function(){\n\t\t\t\t\t\tmodalService.open(opts.modalUrl, opts.modalCtrl, marker);\n\t\t\t\t\t});\n\t\t\t\t\telInfo.addEventListener(\"click\", function(){\n\t\t\t\t\t\tmodalService.open(opts.modalUrlInfo, opts.modalCtrlInfo, marker);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (typeof(elCoverage) !== 'undefined' && elCoverage !== null){\n\t\t\t\t\telCoverage.addEventListener(\"click\", function(){\n\t\t\t\t\t\tapiService.networkAnalysisCoverageApi(marker._id).then(function(response){\n\t\t\t\t\t\t\tdrawCoveragePipe(map, opts, true, marker, response.data);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (typeof(elCart) !== 'undefined' && elCart !== null){\n\t\t\t\t\telCart.addEventListener(\"click\", function(/*e*/){\n\t\t\t\t\t\tvar isUnique = validateUniquMarker(opts.plotMarkers, marker);\n\t\t\t\t\t\tvar totalSelected = opts.plotMarkers.length;\n\t\t\t\t\t\tvar max = 10;\n\t\t\t\t\t\tif(angular.isDefined(marker.datapoint.pressure)){\n\t\t\t\t\t\t\tif(!opts.hasOwnProperty('plotMarkerInstance')){\n\t\t\t\t\t\t\t\topts.plotMarkerInstance = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(totalSelected<max){\n\t\t\t\t\t\t\t\tif(isUnique){\n\t\t\t\t\t\t\t\t\topts.plotMarkerInstance.push(markerItem);\n\t\t\t\t\t\t\t\t\tmarkerItem.setAnimation(BMAP_ANIMATION_BOUNCE);\n\t\t\t\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t\t\t\t$scope.options.plotMarkers.push(marker);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif(markerItem.hasOwnProperty('Ac')){ //hack to get selected marker element\n\t\t\t\t\t\t\t\t\t\taddToCartAnimation($(markerItem.Ac));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tmap.closeInfoWindow();\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tdialogService.alert(null,{\n\t\t\t\t\t\t\t\t\t\ttitle: $translate.instant('site_network_data_plot_title'),\n\t\t\t\t\t\t\t\t\t\tcontent: $translate.instant('site_network_data_plot_sensor_exists'),\n\t\t\t\t\t\t\t\t\t\tok: $translate.instant('site_login_error_noted')\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdialogService.alert(null,{\n\t\t\t\t\t\t\t\t\ttitle: $translate.instant('site_network_data_plot_title'),\n\t\t\t\t\t\t\t\t\tcontent: $translate.instant('site_network_data_plot_warning_limit'),\n\t\t\t\t\t\t\t\t\tok: $translate.instant('site_login_error_noted')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tdialogService.alert(null,{\n\t\t\t\t\t\t\t\ttitle: $translate.instant('site_network_data_plot_title'),\n\t\t\t\t\t\t\t\tcontent: $translate.instant('site_network_data_plot_sensor_error'),\n\t\t\t\t\t\t\t\tok: $translate.instant('site_login_error_noted')\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\t\tmarkerItem.addEventListener('click', previousMarker.listener);\n\t\t\txpro.tooltips();\n\t\t});\n\t\tif(opts.mapType===\"heatmap\"){\n\t\t\tmap.setViewport(points);\n\t\t}\n\t}\n})();","/* global angular, BMap */\n(function() {\n\t'use strict';\n\tangular\n\t\t.module('xProject.factory', [])\n\t\t.factory('dialogService', dialogService)\n\t\t.factory('notify', notify)\n\t\t.factory('modalService', modalService);\n\n\tfunction dialogService($mdDialog) {\n\t\t\tvar dialogService = {};\n\t\t\t// create an array of alerts available globally\n\t\t\tdialogService.alert = function(ev, opts){\n\t\t\t\tvar config = {\n\t\t\t\t\ttitle: \"Information\",\n\t\t\t\t\tcontent : \"Something went wrong! Please try again\",\n\t\t\t\t\tok: \"Got It!\",\n\t\t\t\t\tclickOutsideToClose: true,\n\t\t\t\t\tcallback: null\n\t\t\t\t};\n\t\t\t\tvar opt_config = angular.extend({}, config, opts);\n\t\t\t\t$mdDialog.show(\n\t\t\t\t\t$mdDialog.alert()\n\t\t\t\t\t.parent(angular.element(document.querySelector('#popupContainer')))\n\t\t\t\t\t\t.clickOutsideToClose(opt_config.clickOutsideToClose)\n\t\t\t\t\t\t.title(opt_config.title)\n\t\t\t\t\t\t.textContent(opt_config.content)\n\t\t\t\t\t\t.ariaLabel(opt_config.title)\n\t\t\t\t\t\t.ok(opt_config.ok)\n\t\t\t\t\t\t.targetEvent(ev)\n\t\t\t\t).then(function(){\n\t\t\t\t\topt_config.callback();\n\t\t\t\t});\n\t\t\t};\n\t\t\treturn dialogService;\n\t}\n\n\tfunction notify($mdToast){\n\t\tvar toastService = {};\n\t\ttoastService.info = function(){\n\t\t\t$mdToast.show(\n\t\t      $mdToast.simple()\n\t\t        .textContent('Simple Toast!')\n\t\t        .position('top right')\n\t\t        .hideDelay(3000)\n\t\t    );\n\t\t};\n\t    return toastService;\n\t}\n\n\tfunction modalService($uibModal){\n\t\tvar vm = this;\n\t\tvar modalInstance;\n\t\treturn{\n\t\t\topen: function(url, ctrl, data){\n\t\t\t\tmodalInstance = $uibModal.open({\n\t\t\t\t\ttemplateUrl: url,\n\t\t\t\t\tcontroller: ctrl,\n\t\t\t\t\tsize: 'lg',\n\t\t\t\t\tresolve: {\n\t\t\t\t\t\titems: function () {\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tmodalInstance.result.then(function (selectedItem) {\n\t\t\t\t\tvm.selected = selectedItem;\n\t\t\t\t}, function () {\n\t\t\t\t\t//$log.info('Modal dismissed at: ' + new Date());\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n})();","/* global angular */\n(function() {\n\t'use strict';\n\tangular\n\t\t.module('xProject.filter', [])\n\t\t.filter('isObjectEmpty', isObjectEmpty)\n\t\t.filter('fromNow', fromNow)\n\t\t.filter('objLimitTo', objLimitTo)\n\t\t.filter('resourceUrl', resourceUrl);\n\n\tfunction objLimitTo(){\n\t\treturn function(obj, limit){\n\t\t\tvar keys = Object.keys(obj);\n\t\t\tif(keys.length < 1) return [];\n\t\t\tvar ret = new Object();\n\t\t\tvar count = 0;\n\t\t\tangular.forEach(keys, function(key, arrayIndex){\n\t\t\t\tif(count >= limit) return false;\n\t\t\t\tret[key] = obj[key];\n\t\t\t\tcount++;\n\t\t\t});\n\t\t\treturn ret;\n\t\t}\n\t}\n\n\tfunction isObjectEmpty(){\n\t\treturn function(object) {\n\t\t\treturn angular.equals({}, object);\n\t\t};\n\t}\n\n\tfunction fromNow(){\n\t\treturn function(timestamp) {\n\t\t\treturn moment(timestamp).fromNow();\n\t\t};\n\t}\n\n\tfunction resourceUrl($sce){\n\t\tvar version = __env.assetVersion;\n\t\treturn function(url) {\n\t\t\treturn $sce.trustAsResourceUrl(url+\"?version=\"+version);\n\t\t};\n\t}\n})();","/* global angular, __env */\n(function() {\n\t'use strict';\n\tangular\n\t\t.module('xProject.auth', [])\n\t\t.controller('authLoginController', authLoginController);\n\n\tauthLoginController.$inject = ['$location', 'authService', 'dialogService','$translate'];\n\n\tfunction authLoginController($location, authService, dialogService, $translate) {\n\t\t/*jshint validthis: true */\n\t\tvar vm = this;\n\t\tvm.user = {};\n\t\tvm.onLogin = function() {\n\t\t\tauthService.login(vm.user)\n\t\t\t.then(function(user){\n\t\t\t\tif(angular.isDefined(user.data.token)){\n\t\t\t\t\tauthService.setAuthentication(user.data);\n\t\t\t\t\t$location.path(__env.pageMain);\n\t\t\t\t}else{\n\t\t\t\t\tdialogService.alert(null,{title: $translate.instant('site_login_error'), content: $translate.instant('site_login_info_invalid'), ok: $translate.instant('site_login_error_noted')});\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function(/*err*/){\n\t\t\t\tdialogService.alert(null,{title: $translate.instant('site_login_error'), content: $translate.instant('site_login_info_invalid'), ok: $translate.instant('site_login_error_noted')});\n\t\t\t});\n\t\t};\n\t}\n})();"]}