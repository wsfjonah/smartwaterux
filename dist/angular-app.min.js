"use strict";var env={};window&&Object.assign(env,window.__env);var app=angular.module("xProject",["ngMaterial","pascalprecht.translate","ngRoute","ngCookies","LocalStorageModule","xProject.config","xProject.directive","xProject.factory","xProject.filter","xProject.services","xProject.auth"]);app.constant("__env",env),app.controller("layoutCtrl",function($scope,$translate,authService,$location,$rootScope,$window){var vm=this,flag_path=__env.folder+"/assets/img/flags/",default_userInfo={username:"",token:"",role:"",projects:[],current_project:{name:""},timezone:"",lang:"",apps:{}};vm.flag_img={en:flag_path+"US.png",cn:flag_path+"CN.png"},vm.lang_trans={en:"us",cn:"cn"},vm.currLang=vm.flag_img[$rootScope.lang],$scope.$on("$includeContentLoaded",function(){xpro.initPageLoadedLibrary()}),$scope.$on("$viewContentLoaded",function(){xpro.resizeHeader()}),vm.userInfo=authService.getAuthentication(),$scope.$watch(function(){return authService.getAuthentication()},function(){vm.userInfo=authService.getAuthentication()},!0),vm.layoutViewClass=function(){return angular.isDefined($rootScope.page_key)&&"login"===$rootScope.page_key?"layout-login":""},vm.isCurrentPath=function(path){return $location.path()==path},vm.changeLanguage=function(key){$translate.use(key),"/site"===$location.$$path&&$window.location.reload()},vm.isAuthenticated=function(){return authService.isLoggedIn()},vm.switchProject=function(projectId){authService.switchProject(projectId).then(function(response){angular.isDefined(response.data.token)&&(authService.updateProject(response.data),function(){var opts=authService.getAuthentication();vm.userInfo=angular.extend({},default_userInfo,opts),console.log(vm.userInfo)}())})},vm.logout=function(){vm.userInfo=angular.extend({},vm.userInfo,default_userInfo),authService.logout(),$location.path("/login")},$rootScope.$on("$translateChangeSuccess",function(event,data){$rootScope.lang=data.language,vm.currLang=vm.lang_trans[data.language]})}),app.run(["$rootScope","$location","authService",function($rootScope,$location,authService){$rootScope.lang="en",$rootScope.page_key="",$rootScope.$on("$routeChangeStart",function(event,currRoute){if(angular.isDefined(currRoute.page_params)&&angular.isDefined(currRoute.page_params.key)&&($rootScope.page_key=currRoute.page_params.key),angular.isDefined(currRoute.restrictions)&&currRoute.restrictions.ensureAuthenticated){authService.isLoggedIn()||(authService.logout(),$location.path("/login"))}})}]),app.config(function($httpProvider,$translateProvider,$qProvider){$qProvider.errorOnUnhandledRejections(!1),$httpProvider.interceptors.push("authInterceptorService"),angular.isDefined($httpProvider.defaults.headers.get)||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.get["Cache-Control"]="no-cache",$httpProvider.defaults.headers.get.Pragma="no-cache",$translateProvider.useStaticFilesLoader({prefix:__env.localeFolderUrl,suffix:".json"}).preferredLanguage("en").useLocalStorage().useSanitizeValueStrategy("escapeParameters")}),app.factory("authInterceptorService",["$q","$injector","$location","localStorageService",function($q,$injector,$location,localStorageService){var authInterceptorServiceFactory={};return authInterceptorServiceFactory.request=function(config){config.headers=config.headers||{};var authData=localStorageService.get("authorizationData"),ignore_url=__env.ignoreInterceptorRequest;return null!==authData&&angular.isDefined(authData.token)&&ignore_url.indexOf(config.url)<0&&(config.params={token:authData.token}),config},authInterceptorServiceFactory.responseError=function(rejection){console.log("##rejection"),(401===rejection.status||-1===rejection.status&&"abort"!==rejection.xhrStatus)&&($injector.get("authService").logout(),$location.path("/login"));return $q.reject(rejection)},authInterceptorServiceFactory}]),function(){angular.module("xProject.config",["oc.lazyLoad"]).config(function($routeProvider){$routeProvider.when("/main",{templateUrl:__env.folder+"/app/modules/main/main.html",controller:"mainController as vm",restrictions:{ensureAuthenticated:!0,loginRedirect:!1},page_params:{key:"dashboard"},resolve:{loadMyCtrl:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load({serie:!0,files:["assets/js/plugins/sparkline/jquery.sparkline.min.js","assets/js/plugins/chartist-js/dist/chartist.min.css","assets/js/plugins/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.css","assets/js/plugins/chartist-js/dist/chartist.min.js","assets/js/plugins/chartist-plugin-tooltip-master/dist/chartist-plugin-tooltip.min.js","assets/js/xpro_dashboard.js","app/modules/main/mainCtrl.js"]})}]}}).when("/location",{templateUrl:__env.folder+"/app/modules/remote/location.html",controller:"locationController as vm",restrictions:{ensureAuthenticated:!0,loginRedirect:!1},page_params:{key:"location"},resolve:{loadMyCtrl:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load({serie:!0,files:["app/vendors/angular-daterangepicker.min.js","app/modules/remote/locationCtrl.js","app/modules/remote/modalEventDetailsCtrl.js","app/modules/remote/modalTimeSeriesCtrl.js","app/modules/remote/modalHighRateCtrl.js","app/modules/remote/modalDetailsCtrl.js"]})}]}}).when("/site",{templateUrl:__env.folder+"/app/modules/remote/site.html",controller:"siteTableController as vm",restrictions:{ensureAuthenticated:!0,loginRedirect:!1},resolve:{loadMyCtrl:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load({serie:!0,files:["assets/css/bootstrap-table.css","assets/js/bootstrap-table.min.js","app/vendors/bootstrap-table-angular.min.js","assets/js/locale/bootstrap-table-zh-CN.min.js","assets/js/locale/bootstrap-table-en-US.min.js","app/vendors/angular-daterangepicker.min.js","app/modules/remote/modalEventDetailsCtrl.js","app/modules/remote/modalTimeSeriesCtrl.js","app/modules/remote/modalHighRateCtrl.js","app/modules/remote/modalDetailsCtrl.js","app/modules/remote/modalMapCtrl.js","app/modules/remote/siteTableCtrl.js"]})}]},page_params:{key:"site"}}).when("/gis",{templateUrl:__env.folder+"/app/modules/network/gis.html",controller:"gisController as vm",restrictions:{ensureAuthenticated:!0,loginRedirect:!1},resolve:{loadMyCtrl:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load({serie:!0,files:["app/modules/network/gisCtrl.js"]})}]},page_params:{key:"gis"}}).when("/network-condition",{templateUrl:__env.folder+"/app/modules/network/netcondition.html",controller:"networkCondtionController as vm",restrictions:{ensureAuthenticated:!0,loginRedirect:!1},resolve:{loadMyCtrl:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load(["app/modules/network/netconditionCrtl.js"])}]},page_params:{key:"network_condition"}}).when("/network-alert",{templateUrl:__env.folder+"/app/modules/network/netalert.html",controller:"networkAlertController as vm",restrictions:{ensureAuthenticated:!0,loginRedirect:!1},resolve:{loadMyCtrl:["$ocLazyLoad",function($ocLazyLoad){return $ocLazyLoad.load(["app/modules/network/netalertCtrl.js"])}]},page_params:{key:"network_alert"}}).when("/login",{templateUrl:__env.folder+"/app/modules/auth/login.html",controller:"authLoginController",controllerAs:"authLoginCtrl",restrictions:{ensureAuthenticated:!1,loginRedirect:!1},page_params:{key:"login"}}).otherwise({redirectTo:"/main"})})}(),function(){function authService($http,localStorageService,$httpParamSerializerJQLike){var _authentication_info={isAuth:!1,username:"",token:"",role:"",projects:[],current_project:{name:""},timezone:"",lang:"",apps:{}};this.login=function(user){return $http({method:"POST",url:__env.userLoginUrl,data:$httpParamSerializerJQLike(user),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},this.switchProject=function(projectId){var params={projectid:projectId,token:this.getAuthentication().token};return $http({method:"POST",url:__env.switchProjectUrl,data:$httpParamSerializerJQLike(params),headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}})},this.updateProject=function(res){var opts_res=angular.extend({},this.getAuthentication(),res);angular.isDefined(res.token)&&""!==res.token&&(opts_res.isAuth=!0),localStorageService.set("authorizationData",opts_res)},this.setAuthentication=function(res){var opts_res=angular.extend({},_authentication_info,res);angular.isDefined(res.token)&&""!==res.token&&(opts_res.isAuth=!0),localStorageService.set("authorizationData",opts_res),this.getAuthentication()},this.isLoggedIn=function(){var user_info=this.getAuthentication(),isAuth=angular.isDefined(user_info.isAuth)&&user_info.isAuth,isToken=angular.isDefined(user_info.token)&&""!==user_info.token;return isAuth&&isToken},this.getAuthentication=function(){var auth_res=localStorageService.get("authorizationData");return null===auth_res&&(auth_res=_authentication_info),auth_res},this.logout=function(){localStorageService.set("authorizationData",_authentication_info),this.updateProject(_authentication_info)}}function apiService($http,localStorageService,$httpParamSerializerJQLike){var apiBaseURL=__env.baseUrl,headers={Pragma:void 0,"Cache-Control":void 0,"X-Requested-With":void 0,"If-Modified-Since":void 0,"Content-Type":"application/json"};this.siteApi=function(string){var configArr={method:"GET",url:apiBaseURL+"site/search",headers:headers,data:$httpParamSerializerJQLike()};return void 0!==string&&""!==string&&(configArr.url=configArr.url+"?query="+string),$http(configArr)},this.timeSeriesAnyApi=function(id){return $http({method:"GET",url:__env.timeSeriesAnyUrl+"/"+id+"/any",headers:headers})},this.timeSeriesHighRateApi=function(res){return $http({method:"GET",url:__env.timeSeriesAnyUrl+"/"+res.id+"/highrate/"+res.from+"/"+res.to,headers:headers})},this.timeSeriesRangeApi=function(datapointId,resolution,from,to){return $http({method:"GET",url:__env.timeSeriesRangeUrl+"/"+datapointId+"/"+resolution+"/"+from+"/"+to,headers:headers})},this.eventAnyApi=function(){return $http({method:"GET",url:__env.eventAnyUrl,headers:headers})},this.eventDurationApi=function(res){return $http({method:"GET",url:__env.eventDurationUrl+"/"+res.to+"/"+res.duration,headers:headers})},this.eventRangeApi=function(from,to){return $http({method:"GET",url:__env.eventRangeUrl+"/"+from+"/"+to,headers:headers})},this.eventDetailsApi=function(eventId){return $http({method:"GET",url:__env.eventDetailsUrl+"/"+eventId,headers:headers})},this.boundaryApi=function(){return $http({method:"GET",url:apiBaseURL+"map/boundary",headers:headers})},this.heatMapApi=function(){return $http({method:"GET",url:apiBaseURL+"map/heatmap",headers:headers})},this.sensorApi=function(query){return $http({method:"GET",url:apiBaseURL+"map/sensorjunction?query="+query,headers:headers})},this.pipeApi=function(query){return $http({method:"GET",url:apiBaseURL+"map/pipe?query="+query,headers:headers})}}angular.module("xProject.services",[]).service("authService",authService).service("apiService",apiService),authService.$inject=["$http","localStorageService","$httpParamSerializerJQLike"],apiService.$inject=["$http","localStorageService","$httpParamSerializerJQLike"]}(),function(){function canvasAction(elem,opts){$("#"+opts.chartElem).find(".canvasjs-chart-toolbar").addClass("hide"),opts.min<=0&&opts.max<=0?$(elem).hide():$(elem).show(),togglePan($(elem).find('[data-state="pan"]'),opts,!0)}function togglePan(btnElem,opts,isTrigger){var panElem=btnElem,toolbar=$("#"+opts.chartElem).find(".canvasjs-chart-toolbar"),value=panElem.data("value"),panActive=panElem.hasClass("isactive");if(void 0!==isTrigger&&isTrigger)return"pan"===value?toolbar.find('button[state="zoom"]').click():"zoom"===value&&toolbar.find('button[state="pan"]').click(),!1;panActive?(toolbar.find('button[state="zoom"]').click(),panElem.data("original-title","Pan Move").data("value","pan").removeClass("isactive").find("i").attr("class","ti-split-h")):(toolbar.find('button[state="pan"]').click(),panElem.data("original-title","Zoom").data("value","zoom").addClass("isactive").find("i").attr("class","ti-zoom-in")),xpro.destroyTooltip(),xpro.tooltips()}function elemReady($parse){return{restrict:"A",link:function($scope,elem,attrs){elem.ready(function(){$scope.$apply(function(){$parse(attrs.elemReady)($scope)})})}}}function projectDropdown(authService,$location){return{restrict:"E",scope:{options:"="},template:'<a href="JavaScript:void(0);" class="dropdown-item" ng-repeat="(key, val) in data.projects" ng-class="{active : data.current_project._id == key}" ng-click="switch(key)">{{ val }}</a>',controller:function($scope){$scope.data=$scope.options,$scope.switch=function(key){key!==$scope.data.current_project._id&&authService.switchProject(key).then(function(response){angular.isDefined(response.data.token)&&(authService.updateProject(response.data),$scope.data=response.data,$location.path(__env.pageMain))})}}}}function xproMap(modalService,mapApi){return{restrict:"AE",replace:"true",scope:{info:"@",options:"=",onMapLoaded:"&"},link:function(scope,elem){var topHt=$(".topbar").outerHeight();elem.css("height",$(window).height()-topHt),$(window).resize(function(){elem.css("height",$(window).height()-topHt)}),scope.initialize=function(){var opts=angular.extend({},{navCtrl:!0,scaleCtrl:!0,overviewCtrl:!0,enableScrollWheelZoom:!0,enableAutoResize:!0,zoom:10,mapType:"map",fullScreen:!1},scope.options),map=createMapInstance(opts,elem),previousMarkers=[];redrawMarkers(map,previousMarkers,opts,scope,modalService),boundaryArea(map,opts),scope.$watch("options.markers",function(){redrawMarkers(map,previousMarkers,opts,scope,modalService)},!0),scope.$watch("options.boundary",function(){boundaryArea(map,opts)},!0)},mapApi.then(function(){scope.initialize()},function(){})},template:'<div ng-style="divStyle"><label ng-style="labelStyle"></label></div>'}}function xproHeatmap($translate,mapApi){return{restrict:"AE",replace:"true",scope:{info:"@",options:"=",onMapLoaded:"&"},link:function(scope,elem){var topHt=$(".topbar").outerHeight();elem.css("height",$(window).height()-topHt),$(window).resize(function(){elem.css("height",$(window).height()-topHt)}),scope.initialize=function(){var opts=angular.extend({},{navCtrl:!0,scaleCtrl:!0,overviewCtrl:!0,enableScrollWheelZoom:!0,zoom:10,mapType:"heatmap",fullScreen:!1},scope.options),map=createMapInstance(opts,elem,$translate),previousMarkers=[];redrawMarkers(map,previousMarkers,opts,scope),scope.$watch("options.markers",function(){redrawMarkers(map,previousMarkers,opts,scope)},!0),scope.$watch("options.pipes",function(){!function(map,opts){opts.pipes.forEach(function(row){var pipeArr=[];row.location.forEach(function(loc){var pt=new BMap.Point(loc.longitude,loc.latitude);pipeArr.push(pt)});var pipeOverlay=new BMap.Polyline(pipeArr,{strokeColor:row.color,strokeWeight:row.weight,strokeOpacity:1});map.addOverlay(pipeOverlay)})}(map,opts)},!0),scope.$watch("options.heatMap",function(newValue){newValue.length&&map.addEventListener("tilesloaded",drawHeatMap(map,opts))},!0)},mapApi.then(function(){scope.initialize()},function(){})},template:'<div ng-style="divStyle"><label ng-style="labelStyle"></label></div>'}}function mapApi($window,$q){var deferred=$q.defer();return $window.initMap=function(){deferred.resolve()},function(){var script=document.createElement("script");script.src="http://api.map.baidu.com/api?v=2.0&ak=CSFSaXio89D3WK1AB38sLNtnkV9fWZO4&callback=initMap",document.body.appendChild(script)}(),deferred.promise}function heatmapApi($window,$q){var deferred=$q.defer();return $window.initMap=function(){deferred.resolve()},function(){var script=document.createElement("script");script.src="",document.body.appendChild(script)}(),deferred.promise}function fullscreenControl(){this.defaultAnchor=BMAP_ANCHOR_TOP_RIGHT,this.defaultOffset=new BMap.Size(10,10)}function toggleHeatMapButtons(){this.defaultAnchor=BMAP_ANCHOR_TOP_RIGHT,this.defaultOffset=new BMap.Size(50,10)}function createMapInstance(opts,element,$translate){var map=new BMap.Map(element[0]);return map.centerAndZoom(new BMap.Point(opts.center.longitude,opts.center.latitude),opts.zoom),map.addControl(new BMap.NavigationControl),map.setCurrentCity(opts.city),map.enableScrollWheelZoom(!0),function(map,opts,element){if(opts.fullScreen){(fullscreenControl.prototype=new BMap.Control).initialize=function(map){var zoomBtn=document.createElement("div");zoomBtn.className="btn waves-effect waves-light btn-secondary btn-sm";var zoomIcon=document.createElement("i");return zoomIcon.className="ti-fullscreen",zoomBtn.appendChild(zoomIcon),zoomBtn.onclick=function(){$(element).hasClass("map-fullscreen")?($(element).removeClass("map-fullscreen"),zoomIcon.className="ti-fullscreen"):($(element).addClass("map-fullscreen"),zoomIcon.className="ti-back-left")},map.getContainer().appendChild(zoomBtn),zoomBtn};var myZoomCtrl=new fullscreenControl;map.addControl(myZoomCtrl)}}(map,opts,element),function(map,opts,element,$translate){if("heatmap"===opts.mapType){(toggleHeatMapButtons.prototype=new BMap.Control).initialize=function(map){var div=document.createElement("div");div.className="btn-group",div.setAttribute("data-toggle","buttons");var labelHeatMap=document.createElement("label");labelHeatMap.className="btn btn-secondary btn-outline btn-sm active",labelHeatMap.setAttribute("for","toggle_heatmap");var chkHeatMap=document.createElement("input");chkHeatMap.type="checkbox",chkHeatMap.setAttribute("name","toggle_heatmap"),chkHeatMap.setAttribute("id","toggle_heatmap"),chkHeatMap.setAttribute("checked","checked"),labelHeatMap.append(chkHeatMap),labelHeatMap.innerHTML+=$translate.instant("site_city_heatmap_toolbar_heatmap");var labelPipe=document.createElement("label");labelPipe.className="btn btn-secondary btn-outline btn-sm active",labelPipe.setAttribute("for","toggle_pipe");var chkPipe=document.createElement("input");chkPipe.type="checkbox",chkPipe.setAttribute("name","toggle_pipe"),chkPipe.setAttribute("id","toggle_pipe"),chkPipe.setAttribute("checked","checked"),labelPipe.append(chkPipe),labelPipe.innerHTML+=$translate.instant("site_city_heatmap_toolbar_pipe");var labelMarker=document.createElement("label");labelMarker.className="btn btn-secondary btn-outline btn-sm active",labelMarker.setAttribute("for","toggle_marker");var chkMarker=document.createElement("input");return chkMarker.type="checkbox",chkMarker.setAttribute("name","toggle_marker"),chkMarker.setAttribute("id","toggle_marker"),chkMarker.setAttribute("checked","checked"),labelMarker.append(chkMarker),labelMarker.innerHTML+=$translate.instant("site_city_heatmap_toolbar_sensor"),div.appendChild(labelHeatMap),div.appendChild(labelPipe),div.appendChild(labelMarker),labelHeatMap.onchange=function(){var isOn=document.getElementById("toggle_heatmap").checked;void 0!==heatmapOverlay&&(isOn?heatmapOverlay.show():heatmapOverlay.hide())},labelPipe.onchange=function(){for(var isOn=document.getElementById("toggle_pipe").checked,allOverlay=map.getOverlays(),i=0;i<allOverlay.length-1;i++)"[object Polyline]"===allOverlay[i].toString()&&(isOn?allOverlay[i].show():allOverlay[i].hide())},labelMarker.onchange=function(){for(var isOn=document.getElementById("toggle_marker").checked,allOverlay=map.getOverlays(),i=0;i<allOverlay.length-1;i++)"[object Marker]"===allOverlay[i].toString()&&(isOn?allOverlay[i].show():allOverlay[i].hide())},map.getContainer().appendChild(div),div};var myCtrl=new toggleHeatMapButtons;map.addControl(myCtrl)}}(map,opts,0,$translate),map}function boundaryArea(map,opts){var points=[],num=Math.ceil(opts.boundary.length/2);opts.boundary.forEach(function(loc){points.push(new BMap.Point(loc.longitude,loc.latitude))});var polygon=new BMap.Polygon(points,{strokeColor:"blue",strokeWeight:3,strokeOpacity:1,fillColor:""});opts.boundary.length&&map.centerAndZoom(new BMap.Point(opts.boundary[num].longitude,opts.boundary[num].latitude),opts.zoom),map.addOverlay(polygon),map.setViewport(points),function(map,opts){var points=[];opts.boundary.forEach(function(loc){points.push(new BMap.Point(loc.longitude,loc.latitude))}),map.setViewport(points)}(map,opts)}function drawHeatMap(map,opts){if(!function(){var elem=document.createElement("canvas");return!(!elem.getContext||!elem.getContext("2d"))}()||void 0===map)return!1;map.removeEventListener("tilesloaded",drawHeatMap);heatmapOverlay=new BMapLib.HeatmapOverlay({radius:150}),map.addOverlay(heatmapOverlay),heatmapOverlay.setDataSet({data:opts.heatMap,max:90}),heatmapOverlay.show()}function redrawMarkers(map,previousMarkers,opts,$scope,modalService){var points=[];previousMarkers.forEach(function(item){var marker=item.marker,listener=item.listener;marker.removeEventListener("click",listener),map.removeOverlay(marker)}),previousMarkers.length=0,opts.markers&&(opts.markers.forEach(function(marker){var markerItem=function(marker,point){if(marker.icon){var icon=new BMap.Icon(marker.icon,new BMap.Size(marker.width,marker.height),{anchor:new BMap.Size(15,marker.height)});return new BMap.Marker(point,{icon:icon})}return new BMap.Marker(point)}(marker,new BMap.Point(marker.longitude,marker.latitude)),infoButton="<div class='btn-group'>";infoButton+="<button type='button' class='btn btn-secondary' data-toggle='tooltip' data-trigger='hover' title='View Info' id='baidu_marker_info'><i class='ti-info-alt'></i></button>",infoButton+="<button type='button' class='btn btn-secondary' data-toggle='tooltip' data-trigger='hover' title='View Data' id='baidu_marker_data'><i class='ti-stats-up'></i></button>",infoButton+="</div>",points.push(new BMap.Point(marker.longitude,marker.latitude)),map.addOverlay(markerItem),markerItem.setLabel("");var previousMarker={marker:markerItem,listener:null};if(previousMarkers.push(previousMarker),marker.title||marker.content){var msg="<p>"+(marker.title||"")+"</p><p>"+(marker.content||"")+"</p>";"map"===opts.mapType&&(msg+=infoButton);var infoWindowItem=new BMap.InfoWindow(msg,{enableMessage:!!marker.enableMessage});previousMarker.listener=function(){this.openInfoWindow(infoWindowItem);var elData=document.getElementById("baidu_marker_data"),elInfo=document.getElementById("baidu_marker_info");angular.isDefined(modalService)&&(elData.addEventListener("click",function(){modalService.open(opts.modalUrl,opts.modalCtrl,marker)}),elInfo.addEventListener("click",function(){modalService.open(opts.modalUrlInfo,opts.modalCtrlInfo,marker)}))},markerItem.addEventListener("click",previousMarker.listener),xpro.tooltips()}}),"heatmap"===opts.mapType&&map.setViewport(points))}angular.module("xProject.directive",["ui.bootstrap"]).directive("xproMap",xproMap).directive("xproHeatmap",xproHeatmap).directive("projectDropdown",projectDropdown).directive("canvasToolbar",function(){return{restrict:"AE",scope:{options:"="},template:'<div class="btn-group" role="group"><button type="button" class="btn btn-secondary" data-state="pan" data-value="pan" data-toggle="tooltip" title="Pan Move"><i class="ti-split-h"></i></button><button type="button" class="btn btn-secondary" data-state="reset" data-toggle="tooltip" title="Reset Zoom"><i class="ti-close"></i></button></div>',link:function(scope,elem){var default_opts={chartElem:null,min:0,max:0},opts=angular.extend({},default_opts,scope.options);canvasAction(elem,opts),elem.on("click",'button[data-state="pan"]',function(){togglePan($(this),opts)}),elem.on("click",'button[data-state="reset"]',function(){$("#"+opts.chartElem).find(".canvasjs-chart-toolbar").find('button[state="reset"]').click(),xpro.destroyTooltip()}),scope.$watch("options",function(newValue,oldValue){newValue!==oldValue&&(opts=angular.extend({},default_opts,newValue),canvasAction(elem,opts))},!0)}}}).directive("elemReady",elemReady).service("mapApi",mapApi).service("heatmapApi",heatmapApi);var heatmapOverlay;elemReady.$inject=["$parse"],projectDropdown.$inject=["authService","$location"],xproMap.$inject=["modalService","mapApi"],xproHeatmap.$inject=["$translate","mapApi"],mapApi.$inject=["$window","$q"],heatmapApi.$inject=["$window","$q"]}(),function(){angular.module("xProject.factory",[]).factory("dialogService",function($rootScope,$mdDialog){var dialogService={};return dialogService.alert=function(ev,opts){var opt_config=angular.extend({},{title:"Information",content:"Something went wrong! Please try again",ok:"Got It!"},opts);$mdDialog.show($mdDialog.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title(opt_config.title).textContent(opt_config.content).ariaLabel(opt_config.title).ok(opt_config.ok).targetEvent(ev))},dialogService}).factory("modalService",function($uibModal){var modalInstance,vm=this;return{open:function(url,ctrl,data){(modalInstance=$uibModal.open({templateUrl:url,controller:ctrl,size:"lg",resolve:{items:function(){return data}}})).result.then(function(selectedItem){vm.selected=selectedItem},function(){})}}})}(),function(){angular.module("xProject.filter",[]).filter("isObjectEmpty",function(){return function(object){return angular.equals({},object)}}).filter("resourceUrl",function($sce){var version=__env.assetVersion;return function(url){return $sce.trustAsResourceUrl(url+"?version="+version)}})}(),function(){function authLoginController($location,authService,dialogService,$translate){var vm=this;vm.user={},vm.onLogin=function(){authService.login(vm.user).then(function(user){angular.isDefined(user.data.token)?(authService.setAuthentication(user.data),$location.path(__env.pageMain)):dialogService.alert(null,{title:$translate.instant("site_login_error"),content:$translate.instant("site_login_info_invalid"),ok:$translate.instant("site_login_error_noted")})}).catch(function(){dialogService.alert(null,{title:$translate.instant("site_login_error"),content:$translate.instant("site_login_info_invalid"),ok:$translate.instant("site_login_error_noted")})})}}angular.module("xProject.auth",[]).controller("authLoginController",authLoginController),authLoginController.$inject=["$location","authService","dialogService","$translate"]}();
//# sourceMappingURL=angular-app.min.js.map
